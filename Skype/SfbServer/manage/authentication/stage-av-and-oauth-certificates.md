---
title: Création de certificats AV et OAuth dans Skype Entreprise Server 2015 à l’aide de -Roll dans Set-CsCertificate
ms.author: heidip
author: microsoftheidi
manager: serdars
ms.date: 1/31/2018
ms.audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 22dec3cc-4b6b-4df2-b269-5b35df4731a7
description: 'Résumé : Étape AV et OAuth certificats pour Skype pour Business Server 2015.'
ms.openlocfilehash: 4117707e7a86833ebb235100c26e27d16e1df9db
ms.sourcegitcommit: 7d819bc9eb63bfd85f5dada09f1b8e5354c56f6b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/28/2018
---
# <a name="stage-av-and-oauth-certificates-in-skype-for-business-server-2015-using--roll-in-set-cscertificate"></a><span data-ttu-id="9f739-103">Création de certificats AV et OAuth dans Skype Entreprise Server 2015 à l’aide de -Roll dans Set-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="9f739-103">Stage AV and OAuth certificates in Skype for Business Server 2015 using -Roll in Set-CsCertificate</span></span>
 
<span data-ttu-id="9f739-104">**Résumé :** Certificats de scène AV et OAuth pour Skype pour Business Server 2015.</span><span class="sxs-lookup"><span data-stu-id="9f739-104">**Summary:** Stage AV and OAuth certificates for Skype for Business Server 2015.</span></span>
  
<span data-ttu-id="9f739-105">Audio/vidéo (A / V) communications est un composant clé de Skype pour Business Server 2015.</span><span class="sxs-lookup"><span data-stu-id="9f739-105">Audio/Video (A/V) communications is a key component of Skype for Business Server 2015.</span></span> <span data-ttu-id="9f739-106">Fonctionnalités de conférence audio et vidéo et partage d’application s’appuient sur les certificats affectés au / V Edge service, en particulier A / V Authentication service.</span><span class="sxs-lookup"><span data-stu-id="9f739-106">Features such as application sharing and audio and video conferencing rely on the certificates assigned to the A/V Edge service, specifically the A/V Authentication service.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="9f739-107">Cette nouvelle fonctionnalité est conçue pour fonctionner pour le A / V Edge service et le certificat OAuthTokenIssuer.</span><span class="sxs-lookup"><span data-stu-id="9f739-107">This new feature is designed to work for the A/V Edge service and the OAuthTokenIssuer certificate.</span></span> <span data-ttu-id="9f739-108">Autres types de certificats peuvent être mis en service ainsi que l’A / V Edge service OAuth type de certificat, mais bénéficieront pas le comportement de coexistence qui l’A / certificat de service V Edge sera.</span><span class="sxs-lookup"><span data-stu-id="9f739-108">Other certificate types can be provisioned along with the A/V Edge service and OAuth certificate type, but will not benefit from the coexistence behavior that the A/V Edge service certificate will.</span></span>
  
<span data-ttu-id="9f739-109">Le Skype pour les applets de commande PowerShell de Business Server Management Shell permet de gérer les Skype pour les certificats de Business Server 2015 fait référence au A / V Edge de certificat en tant que le type de certificat de AudioVideoAuthentication et le certificat de OAuthServer en tant que service typeOAuthTokenIssuer.</span><span class="sxs-lookup"><span data-stu-id="9f739-109">The Skype for Business Server Management Shell PowerShell cmdlets used to manage Skype for Business Server 2015 certificates refers to the A/V Edge service certificate as the AudioVideoAuthentication certificate type and the OAuthServer certificate as typeOAuthTokenIssuer.</span></span> <span data-ttu-id="9f739-110">Pour le reste de cette rubrique et pour identifier les certificats, ils seront visés à par le même type d’identificateur, AudioVideoAuthentication andOAuthTokenIssuer.</span><span class="sxs-lookup"><span data-stu-id="9f739-110">For the rest of this topic and to uniquely identify the certificates, they will be referred to by the same identifier type, AudioVideoAuthentication andOAuthTokenIssuer.</span></span>
  
<span data-ttu-id="9f739-111">Le service d’authentification A/V est responsable de l’émission des jetons utilisés par les clients et autres consommateurs A/V.</span><span class="sxs-lookup"><span data-stu-id="9f739-111">The A/V Authentication service is responsible for issuing tokens that are used by clients and other A/V consumers.</span></span> <span data-ttu-id="9f739-112">Les jetons sont générés à partir des attributs du certificat et l’expiration du certificat entraîne la perte de la connexion et la nécessité de se reconnecter avec un nouveau jeton généré par le nouveau certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-112">The tokens are generated from attributes on the certificate, and when the certificate expires, loss of connection and requirement to rejoin with a new token generated by the new certificate will result.</span></span> <span data-ttu-id="9f739-113">Une nouvelle fonctionnalité dans Skype pour Business Server 2015 corrigera ce problème - la possibilité de préparer un nouveau certificat avant l’expiration et l’autorisation des deux certificats de continuer à fonctionner pendant une période de temps.</span><span class="sxs-lookup"><span data-stu-id="9f739-113">A new feature in Skype for Business Server 2015 will alleviate this problem - the ability to stage a new certificate in advance of the old one expiring and allowing both certificates to continue to function for a period of time.</span></span> <span data-ttu-id="9f739-114">Cette fonctionnalité utilise la fonctionnalité mise à jour dans l’ensemble-CsCertificate Skype pour l’applet de commande Business Server Management Shell.</span><span class="sxs-lookup"><span data-stu-id="9f739-114">This feature uses updated functionality in the Set-CsCertificate Skype for Business Server Management Shell cmdlet.</span></span> <span data-ttu-id="9f739-115">Le nouveau paramètre-rouleau, avec le paramètre existant - EffectiveDate argument, place le nouveau certificat de AudioVideoAuthentication dans le magasin de certificats.</span><span class="sxs-lookup"><span data-stu-id="9f739-115">The new parameter -Roll, with the existing parameter -EffectiveDate, will place the new AudioVideoAuthentication certificate in the certificate store.</span></span> <span data-ttu-id="9f739-116">L’ancien certificat AudioVideoAuthentication sera conservé pour permettre la validation des jetons émis.</span><span class="sxs-lookup"><span data-stu-id="9f739-116">The older AudioVideoAuthentication certificate will still remain for issued tokens to be validated against.</span></span> <span data-ttu-id="9f739-117">Après la mise en place du nouveau certificat AudioVideoAuthentication, la série d’événements suivante se produira :</span><span class="sxs-lookup"><span data-stu-id="9f739-117">Beginning with putting the new AudioVideoAuthentication certificate in place, the following series of events will occur:</span></span>
  
> [!TIP]
> <span data-ttu-id="9f739-118">Le Skype sur des applets de commande de Business Server Management Shell pour gérer les certificats, vous pouvez demander distinctes et des certificats pour chaque rôle sur le serveur de transport Edge.</span><span class="sxs-lookup"><span data-stu-id="9f739-118">Using the Skype for Business Server Management Shell cmdlets for managing certificates, you can request separate and distinct certificates for each purpose on the Edge Server.</span></span> <span data-ttu-id="9f739-119">À l’aide de l’Assistant de certificat dans le Skype pour l’Assistant de déploiement de Business Server vous aide à créer des certificats, mais est généralement de type **par défaut** les couples toutes les certificats utilise pour le serveur Edge dans un même certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-119">Using the Certificate Wizard in the Skype for Business Server Deployment Wizard assists you in creating certificates, but is typically of the **default** type which couples all certificate uses for the Edge Server onto a single certificate.</span></span> <span data-ttu-id="9f739-120">Si vous souhaitez utiliser la fonctionnalité de certificat propagé, la pratique recommandée consiste à dissocier le certificat AudioVideoAuthentication des autres finalités du certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-120">The recommended practice if you are going to use the rolling certificate feature is to decouple the AudioVideoAuthentication certificate from the other certificate purposes.</span></span> <span data-ttu-id="9f739-121">Vous pouvez configurer et créer un certificat transitoire de type Default, mais seule la partie AudioVideoAuthentication du certificat combiné bénéficiera de cette création transitoire.</span><span class="sxs-lookup"><span data-stu-id="9f739-121">You can provision and stage a certificate of the Default type, but only the AudioVideoAuthentication portion of the combined certificate will benefit from the staging.</span></span> <span data-ttu-id="9f739-122">Un utilisateur impliqué (par exemple) dans une conversation de messagerie lors de l’expiration du certificat instantanée devra se déconnecter et se reconnecter pour faire utiliser le nouveau certificat associé au service Edge d’accès.</span><span class="sxs-lookup"><span data-stu-id="9f739-122">A user involved in (for example) an instant messaging conversation when the certificate expires will need to log out and log back in to make use of the new certificate associated with the Access Edge service.</span></span> <span data-ttu-id="9f739-123">Un comportement similaire se produit pour un utilisateur impliqué dans une conférence Web en utilisant le service de serveur Edge de conférence Web.</span><span class="sxs-lookup"><span data-stu-id="9f739-123">Similar behavior will occur for a user involved in a Web conference using the Web Conferencing Edge service.</span></span> <span data-ttu-id="9f739-124">Le certificat OAuthTokenIssuer est un type spécifique partagé sur tous les serveurs.</span><span class="sxs-lookup"><span data-stu-id="9f739-124">The OAuthTokenIssuer certificate is a specific type that is shared across all servers.</span></span> <span data-ttu-id="9f739-125">Vous créez et gérez le certificat dans un seul endroit et que le certificat est stocké dans le magasin Central de gestion pour tous les autres serveurs.</span><span class="sxs-lookup"><span data-stu-id="9f739-125">You create and manage the certificate in one place and the certificate is stored in the Central Management store for all other servers.</span></span>
  
<span data-ttu-id="9f739-126">Des informations supplémentaires sont nécessaires pour bien comprendre vos options et spécifications quand vous utilisez l’applet de commande Set-CsCertificate, par exemple, lorsque vous l’utilisez pour créer des certificats transitoires avant que le certificat actuel expire.</span><span class="sxs-lookup"><span data-stu-id="9f739-126">Additional detail is needed to fully understand your options and requirements when using the Set-CsCertificate cmdlet and using it to stage certificates prior to the current certificate expiring.</span></span> <span data-ttu-id="9f739-127">-Rouleau de paramètre est important, mais essentiellement un seul objectif.</span><span class="sxs-lookup"><span data-stu-id="9f739-127">The -Roll parameter is important, but essentially single purpose.</span></span> <span data-ttu-id="9f739-128">Si vous le définissez en tant que paramètre, vous indiquez à Set-CsCertificate qui vous fournira des informations sur le certificat qui vont être défini par - Type (par exemple AudioVideoAuthentication et OAuthTokenIssuer), laquelle devient le certificat effet défini par - EffectiveDate Argument.</span><span class="sxs-lookup"><span data-stu-id="9f739-128">If you define it as a parameter, you are telling Set-CsCertificate that you will be providing information about the certificate that will be affected defined by -Type (for example AudioVideoAuthentication and OAuthTokenIssuer), when the certificate will become effective defined by -EffectiveDate.</span></span>
  
 <span data-ttu-id="9f739-129">**-Rouleau**:-rouleau de paramètre est obligatoire et qu’il a des dépendances qui doivent être fournis en même temps.</span><span class="sxs-lookup"><span data-stu-id="9f739-129">**-Roll**: The -Roll parameter is required and has dependencies that must be supplied along with it.</span></span> <span data-ttu-id="9f739-130">Paramètres requis pour définir quels certificats seront affectés et leur mode d’application :</span><span class="sxs-lookup"><span data-stu-id="9f739-130">Required parameters to fully define which certificates will be affected and how they will be applied:</span></span>
  
 <span data-ttu-id="9f739-131">**EffectiveDate Argument-**: le paramètre - EffectiveDate argument définit lorsque le nouveau certificat devient co-active avec le certificat en cours.</span><span class="sxs-lookup"><span data-stu-id="9f739-131">**-EffectiveDate**: The parameter -EffectiveDate defines when the new certificate will become co-active with the current certificate.</span></span> <span data-ttu-id="9f739-132">EffectiveDate argument - peut être proche de la date d’expiration du certificat en cours, ou il peut être une période plus longue.</span><span class="sxs-lookup"><span data-stu-id="9f739-132">The -EffectiveDate can be close to the expiry time of the current certificate, or it can be a longer period of time.</span></span> <span data-ttu-id="9f739-133">Un recommandée minimale - EffectiveDate Argument pour le certificat de AudioVideoAuthentication serait à 8 heures, qui est la durée de vie jeton par défaut pour les jetons de service de périphérique AV émis à l’aide du certificat AudioVideoAuthentication.</span><span class="sxs-lookup"><span data-stu-id="9f739-133">A recommended minimum -EffectiveDate for the AudioVideoAuthentication certificate would be 8 hours, which is the default token lifetime for AV Edge service tokens issued using the AudioVideoAuthentication certificate.</span></span>
  
<span data-ttu-id="9f739-p109">Lors de la création de certificats OAuthTokenIssuer transitoires, l’heure d’avance (recouvrement) doit répondre à différentes spécifications pour que le certificat puisse entrer en vigueur. Le temps d’avance minimal du certificat OAuthTokenIssuer doit être de 24 heures avant l’heure d’expiration du certificat en cours. L’heure d’avance étendue pour la coexistence est due aux autres rôles de serveur qui dépendent du certificat OAuthTokenIssuer (Exchange Server, par exemple), qui possède une durée de conservation supérieure pour les clés de chiffrement et d’authentification créées à l’aide de certificats.</span><span class="sxs-lookup"><span data-stu-id="9f739-p109">When staging OAuthTokenIssuer certificates, there are different requirements for the lead time before the certificate can become effective. The minimum time that the OAuthTokenIssuer certificate should have for its lead time is 24 hours before the expiration time of the current certificate. The extended lead time for the coexistence is because of other server roles that are dependent on the OAuthTokenIssuer certificate (Exchange Server, for example) which has a longer retention time for certificate created authentication and encryption key materials.</span></span>
  
 <span data-ttu-id="9f739-137">**-Empreinte**: l’empreinte est un attribut du certificat qui est unique pour ce certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-137">**-Thumbprint**: The thumbprint is an attribute on the certificate that is unique to that certificate.</span></span> <span data-ttu-id="9f739-138">-Empreinte de paramètre est utilisé pour identifier les certificats qui seront affectés par les actions de l’applet de commande Set-CsCertificate.</span><span class="sxs-lookup"><span data-stu-id="9f739-138">The -Thumbprint parameter is used to identify the certificate that will be affected by the actions of the Set-CsCertificate cmdlet.</span></span>
  
 <span data-ttu-id="9f739-139">**-Type**:-Type de paramètre peut accepter un type d’utilisation de certificat unique ou une liste séparée par des virgules des types d’utilisation de certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-139">**-Type**: The -Type parameter can accept a single certificate usage type or a comma separated list of certificate usage types.</span></span> <span data-ttu-id="9f739-140">Les types de certificats sont ceux permettant d’identifier l’applet de commande et le serveur de l’objectif du certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-140">The certificate types are those that identify to the cmdlet and to the server what the purpose of the certificate is.</span></span> <span data-ttu-id="9f739-141">Par exemple, le type AudioVideoAuthentication est utilisé par l’A / V Edge service et le service d’authentification AV.</span><span class="sxs-lookup"><span data-stu-id="9f739-141">For example, type AudioVideoAuthentication is for use by the A/V Edge service and the AV Authentication service.</span></span> <span data-ttu-id="9f739-142">Si vous décidez de certificats de stade et la fourniture d’un type différent en même temps, vous devez prendre en compte la plus longue nécessaire efficace délai minimum pour les certificats.</span><span class="sxs-lookup"><span data-stu-id="9f739-142">If you decide to stage and provision certificates of a different type at the same time, you must consider the longest required minimum effective lead time for the certificates.</span></span> <span data-ttu-id="9f739-143">Par exemple, vous devez les certificats de phase de type AudioVideoAuthentication et OAuthTokenIssuer.</span><span class="sxs-lookup"><span data-stu-id="9f739-143">For example, you need to stage certificates of type AudioVideoAuthentication and OAuthTokenIssuer.</span></span> <span data-ttu-id="9f739-144">Votre EffectiveDate Argument - minimale doit être de la plus grande des deux certificats, dans ce cas, le OAuthTokenIssuer, qui a un délai minimal de 24 heures.</span><span class="sxs-lookup"><span data-stu-id="9f739-144">Your minimum -EffectiveDate must be the greater of the two certificates, in this case the OAuthTokenIssuer, which has a minimum lead time of 24 hours.</span></span> <span data-ttu-id="9f739-145">Si vous ne souhaitez pas reclasser le certificat de AudioVideoAuthentication avec un délai de 24 heures, stade il séparément avec un EffectiveDate Argument qui est le plus à vos besoins.</span><span class="sxs-lookup"><span data-stu-id="9f739-145">If you do not want to stage the AudioVideoAuthentication certificate with a lead time of 24 hours, stage it separately with an EffectiveDate that is more to your requirements.</span></span>
  
### <a name="to-update-or-renew-an-av-edge-service-certificate-with-a--roll-and--effectivedate-parameters"></a><span data-ttu-id="9f739-146">Mettre à jour ou renouveler un A / V Edge service de certificats-paramètres rouleau et EffectiveDate Argument -</span><span class="sxs-lookup"><span data-stu-id="9f739-146">To update or renew an A/V Edge service certificate with a -Roll and -EffectiveDate parameters</span></span>

1. <span data-ttu-id="9f739-147">Ouvrez une session sur l’ordinateur local en tant que membre du groupe Administrateurs.</span><span class="sxs-lookup"><span data-stu-id="9f739-147">Log on to the local computer as a member of the Administrators group.</span></span>
    
2. <span data-ttu-id="9f739-148">Demander un renouvellement ou un nouveau certificat de AudioVideoAuthentication avec une clé privée exportable pour le certificat existant sur A / V Edge service.</span><span class="sxs-lookup"><span data-stu-id="9f739-148">Request a renewal or new AudioVideoAuthentication certificate with exportable private key for the existing certificate on the A/V Edge service.</span></span>
    
3. <span data-ttu-id="9f739-149">Importer le nouveau certificat de AudioVideoAuthentication pour le serveur de transport Edge et tous les autres serveur de transport Edge dans votre pool (si vous avez un pool déployé).</span><span class="sxs-lookup"><span data-stu-id="9f739-149">Import the new AudioVideoAuthentication certificate to the Edge Server and all other Edge Server in your pool (if you have a pool deployed).</span></span>
    
4. <span data-ttu-id="9f739-150">Configurer le certificat importé avec l’applet de commande Set-CsCertificate et utiliser le rouleau paramètre - avec le paramètre - EffectiveDate Argument.</span><span class="sxs-lookup"><span data-stu-id="9f739-150">Configure the imported certificate with the Set-CsCertificate cmdlet and use the -Roll parameter with the -EffectiveDate parameter.</span></span> <span data-ttu-id="9f739-151">La date d’effet doit être définie comme étant l’heure d’expiration du certificat actuel (14:00:00 ou 2:00:00 PM) moins la durée de vie du jeton, dont la valeur par défaut est de huit heures.</span><span class="sxs-lookup"><span data-stu-id="9f739-151">The effective date should be defined as the current certificate expire time (14:00:00, or 2:00:00 PM) minus token lifetime (by default eight hours).</span></span> <span data-ttu-id="9f739-152">Cela nous donne une heure à laquelle le certificat doit être défini sur actif et est EffectiveDate Argument - \<chaîne\>: « 7/22/2015 6:00:00 AM ».</span><span class="sxs-lookup"><span data-stu-id="9f739-152">This gives us a time that the certificate must be set to active, and is the -EffectiveDate \<string\>: "7/22/2015 6:00:00 AM".</span></span> 
    
    > [!IMPORTANT]
    > <span data-ttu-id="9f739-153">Pour un pool de bord, vous devez disposer de tous les certificats de AudioVideoAuthentication déployés et mis en service par la date et l’heure défini par le paramètre - EffectiveDate Argument du premier certificat déployé pour éviter une possible / interruption des communications V en raison de la plus ancienne certificats arrivant à expiration avant que tous les jetons de client et les consommateurs ont été renouvelés en utilisant le nouveau certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-153">For an Edge pool, you must have all AudioVideoAuthentication certificates deployed and provisioned by the date and time defined by the -EffectiveDate parameter of the first certificate deployed to avoid possible A/V communications disruption due to the older certificate expiring before all client and consumer tokens have been renewed using the new certificate.</span></span> 
  
    <span data-ttu-id="9f739-154">Le jeu-CsCertificate de commande avec le rouleau et EffectiveTime - paramètre :</span><span class="sxs-lookup"><span data-stu-id="9f739-154">The Set-CsCertificate command with the -Roll and -EffectiveTime parameter:</span></span>
    
  ```
  Set-CsCertificate -Type AudioVideoAuthentication -Thumbprint
          <thumb print of new certificate> -Roll -EffectiveDate <date and time
          for certificate to become active>
  ```

    <span data-ttu-id="9f739-155">Exemple de commande Set-CsCertificate :</span><span class="sxs-lookup"><span data-stu-id="9f739-155">An example Set-CsCertificate command:</span></span>
    
  ```
  Set-CsCertificate -Type AudioVideoAuthentication -Thumbprint
          "B142918E463981A76503828BB1278391B716280987B" -Roll -EffectiveDate "7/22/2015
          6:00:00 AM"
  ```

    > [!IMPORTANT]
    > <span data-ttu-id="9f739-156">L’EffectiveDate argument doit être formaté pour correspondre aux paramètres de langue et la région de votre serveur.</span><span class="sxs-lookup"><span data-stu-id="9f739-156">The EffectiveDate must be formatted to match your server's region and language settings.</span></span> <span data-ttu-id="9f739-157">Cet exemple utilise le paramètre régional et linguistique Anglais (États-Unis).</span><span class="sxs-lookup"><span data-stu-id="9f739-157">The example uses the US English Region and Language settings</span></span> 
  
<span data-ttu-id="9f739-158">Pour mieux comprendre le processus de ce jeu-CsCertificate - rouleau et EffectiveDate Argument - permet de préparer un nouveau certificat pour la délivrance de nouveaux jetons de AudioVideoAuthentication tout en utilisant un certificat existant pour valider des AudioVideoAuthentication qui sont en cours d’utilisation par les consommateurs, une chronologie visual est un moyen efficace de comprendre le processus.</span><span class="sxs-lookup"><span data-stu-id="9f739-158">To further understand the process that Set-CsCertificate, -Roll, and -EffectiveDate use to stage a new certificate for issuing new AudioVideoAuthentication tokens while still using an existing certificate to validate AudioVideoAuthentication that are in use by consumers, a visual timeline is an effective means of understanding the process.</span></span> <span data-ttu-id="9f739-159">Dans l’exemple suivant, l’administrateur détermine que le certificat du service V Edge est d’arriver à expiration à 2:00:00 PM le 07/22/2015.</span><span class="sxs-lookup"><span data-stu-id="9f739-159">In the following example, the administrator determines that the A/V Edge service certificate is due to expire at 2:00:00 PM on 07/22/2015.</span></span> <span data-ttu-id="9f739-160">Il demande et reçoit un nouveau certificat et les importe dans chaque serveur de transport Edge dans son pool.</span><span class="sxs-lookup"><span data-stu-id="9f739-160">He requests and receives a new certificate and imports it to each Edge Server in his pool.</span></span> <span data-ttu-id="9f739-161">À 2 heures du matin à 07/22/2015, il commence à s’exécuter Get-CsCertificate avec - Roll, - empreinte numérique égale à la chaîne d’empreinte numérique du certificat nouvelle et EffectiveTime - la valeur 22/07/2015 6:00:00 AM.</span><span class="sxs-lookup"><span data-stu-id="9f739-161">At 2 AM on 07/22/2015, he begins running Get-CsCertificate with -Roll, -Thumbprint equal to the thumbprint string of the new certificate, and -EffectiveTime set to 07/22/2015 6:00:00 AM.</span></span> <span data-ttu-id="9f739-162">Il exécute cette commande sur chaque serveur Edge.</span><span class="sxs-lookup"><span data-stu-id="9f739-162">He runs this command on each Edge Server.</span></span>
  
![Utilisation des paramètres Roll et EffectiveDate.](../../media/Ops_Certificate_Set_Roll_EffectiveTime_Timeline.jpg)
  
|<span data-ttu-id="9f739-164">**Légende**</span><span class="sxs-lookup"><span data-stu-id="9f739-164">**Callout**</span></span>|<span data-ttu-id="9f739-165">**Étape**</span><span class="sxs-lookup"><span data-stu-id="9f739-165">**Stage**</span></span>|
|:-----|:-----|
|<span data-ttu-id="9f739-166">1</span><span class="sxs-lookup"><span data-stu-id="9f739-166">1</span></span>  <br/> |<span data-ttu-id="9f739-167">Début : 22/7/2015 12:00:00</span><span class="sxs-lookup"><span data-stu-id="9f739-167">Start: 7/22/2015 12:00:00 AM</span></span>  <br/> <span data-ttu-id="9f739-p115">Le certificat AudioVideoAuthentication actuel doit expirer à 14:00:00 le 22/7/2015. Cette date/heure d’expiration est déterminée par l’heure sur le certificat. Planifiez le remplacement du certificat et la substitution en tenant compte d’un chevauchement de 8 heures (durée de vie du jeton par défaut) avant que le certificat existant expire. Le temps d’avance 02:00:00 est utilisé dans cet exemple pour permettre à l’administrateur de disposer de suffisamment de temps pour placer et mettre en service les nouveaux certificats en avance sur l’heure effective (06:00:00).</span><span class="sxs-lookup"><span data-stu-id="9f739-p115">The current AudioVideoAuthentication certificate is due to expire at 2:00:00 PM on 7/22/2015. This is determined by the expires time stamp on the certificate. Plan your certificate replacement and rollover to account for an 8 hour overlap (default token lifetime) before the existing certificate reaches the expire time. The 2:00:00 AM lead time is used in this example to allow the administrator adequate time to place and provision the new certificates in advance of the 6:00:00 AM effective time.</span></span>  <br/> |
|<span data-ttu-id="9f739-172">2</span><span class="sxs-lookup"><span data-stu-id="9f739-172">2</span></span>  <br/> |<span data-ttu-id="9f739-173">22/7/2015 02:00:00 -22/7/2015 05:59:59</span><span class="sxs-lookup"><span data-stu-id="9f739-173">7/22/2015 2:00:00 AM - 7/22/2015 5:59:59 AM</span></span>  <br/> <span data-ttu-id="9f739-174">Définir des certificats sur les serveurs Edge avec temps effectif de 6:00:00 AM (4 heures délai est dans cet exemple, mais il peut être plus longue) à l’aide de Set-CsCertificate-Type \<type d’utilisation du certificat\> -empreinte \<empreinte numérique du certificat\> - ROULEAU EffectiveDate Argument - \<chaîne datetime de l’heure d’effet d’un nouveau certificat\></span><span class="sxs-lookup"><span data-stu-id="9f739-174">Set Certificates on Edge Servers with effective time of 6:00:00 AM (4 hour lead time is for this example, but can be longer) using Set-CsCertificate -Type \<certificate usage type\> -Thumbprint \<thumbprint of new certificate\> -Roll -EffectiveDate \<datetime string of the effective time for new certificate\></span></span>  <br/> |
|<span data-ttu-id="9f739-175">3</span><span class="sxs-lookup"><span data-stu-id="9f739-175">3</span></span>  <br/> |<span data-ttu-id="9f739-176">22/7/2015 06:00 -22/7/2015 14:00</span><span class="sxs-lookup"><span data-stu-id="9f739-176">7/22/2015 6:00 AM - 7/22/2015 2:00 PM</span></span>  <br/> <span data-ttu-id="9f739-p116">Pour valider des jetons, le nouveau certificat est testé d’abord, et si le nouveau certificat ne parvient pas à valider le jeton, l’ancien certificat est testé. Cette procédure est utilisée pour tous les jetons pendant la période de chevauchement de 8 heures (durée de vie du jeton par défaut)</span><span class="sxs-lookup"><span data-stu-id="9f739-p116">To validate tokens, the new certificate is tried first, and if the new certificate fails to validate the token, the old certificate is tried. This process is used for all tokens during the 8 hour (default token lifetime) overlap period.</span></span>  <br/> |
|<span data-ttu-id="9f739-179">4</span><span class="sxs-lookup"><span data-stu-id="9f739-179">4</span></span>  <br/> |<span data-ttu-id="9f739-180">Fin : 22/7/2015 02:00:01</span><span class="sxs-lookup"><span data-stu-id="9f739-180">End: 7/22/2015 2:00:01 PM</span></span>  <br/> <span data-ttu-id="9f739-181">L’ancien certificat a expiré et le nouveau certificat a pris le relais.</span><span class="sxs-lookup"><span data-stu-id="9f739-181">Old certificate has expired and the new certificate has taken over.</span></span> <span data-ttu-id="9f739-182">Ancien certificat peut être supprimé en toute sécurité avec suppression-CsCertificate-Type \<type d’utilisation du certificat\> -précédent</span><span class="sxs-lookup"><span data-stu-id="9f739-182">Old certificate can be safely removed with Remove-CsCertificate -Type \<certificate usage type\> -Previous</span></span>  <br/> |
   
<span data-ttu-id="9f739-183">Lorsque la date d’effet est atteinte (7/21/2012 06:00:00 AM), tous les nouveaux jetons sont émis par le nouveau certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-183">When the effective time is reached (7/22/2015 6:00:00 AM), all new tokens are issued by the new certificate.</span></span> <span data-ttu-id="9f739-184">Lors de la validation des jetons, ces derniers sont d’abord validés par rapport au nouveau certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-184">When validating tokens, tokens will first be validated against the new certificate.</span></span> <span data-ttu-id="9f739-185">Si la validation échoue, l’ancien certificat est testé.</span><span class="sxs-lookup"><span data-stu-id="9f739-185">If the validation fails, the old certificate is tried.</span></span> <span data-ttu-id="9f739-186">La procédure de test du nouveau certificat et d’utilisation de l’ancien certificat continuera jusqu’à l’expiration de l’ancien certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-186">The process of trying the new and falling back to the old certificate will continue until the expiry time of the old certificate.</span></span> <span data-ttu-id="9f739-187">Une fois l’ancien certificat expiré (22/7/2012 14:00:00), les jetons ne seront validés que par le nouveau certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-187">Once the old certificate has expired (7/22/2015 2:00:00 PM), tokens will only be validated by the new certificate.</span></span> <span data-ttu-id="9f739-188">L’ancien certificat peut être supprimé en toute sécurité à l’aide de l’applet de commande Remove-CsCertificate avec le précédent paramètre-.</span><span class="sxs-lookup"><span data-stu-id="9f739-188">The old certificate can be safely removed using the Remove-CsCertificate cmdlet with the -Previous parameter.</span></span>

```
Remove-CsCertificate -Type AudioVideoAuthentication -Previous
```

### <a name="to-update-or-renew-an-oauthtokenissuer-certificate-with-a--roll-and--effectivedate-parameters"></a><span data-ttu-id="9f739-189">Mettre à jour ou renouveler un OAuthTokenIssuer avec un - rouleau et EffectiveDate Argument - des paramètres de certificat</span><span class="sxs-lookup"><span data-stu-id="9f739-189">To update or renew an OAuthTokenIssuer certificate with a -Roll and -EffectiveDate parameters</span></span>

1. <span data-ttu-id="9f739-190">Ouvrez une session sur l’ordinateur local en tant que membre du groupe Administrateurs.</span><span class="sxs-lookup"><span data-stu-id="9f739-190">Log on to the local computer as a member of the Administrators group.</span></span>
    
2. <span data-ttu-id="9f739-191">Demander un renouvellement ou un nouveau certificat de OAuthTokenIssuer avec la clé privée exportable pour le certificat existant sur le serveur frontal.</span><span class="sxs-lookup"><span data-stu-id="9f739-191">Request a renewal or new OAuthTokenIssuer certificate with exportable private key for the existing certificate on the Front End Server.</span></span>
    
3. <span data-ttu-id="9f739-192">Importer le nouveau certificat de OAuthTokenIssuer pour un serveur frontal dans votre pool (si vous avez un pool déployé).</span><span class="sxs-lookup"><span data-stu-id="9f739-192">Import the new OAuthTokenIssuer certificate to a Front End Server in your pool (if you have a pool deployed).</span></span> <span data-ttu-id="9f739-193">Le certificat OAuthTokenIssuer est répliqué globalement et ne doit être mis à jour et renouvelé que sur les serveurs de votre déploiement.</span><span class="sxs-lookup"><span data-stu-id="9f739-193">The OAuthTokenIssuer certificate is replicated globally and only needs to be updated and renewed at any server in your deployment.</span></span> <span data-ttu-id="9f739-194">Le serveur frontal est utilisé comme un exemple.</span><span class="sxs-lookup"><span data-stu-id="9f739-194">The Front End Server is used as an example.</span></span>
    
4. <span data-ttu-id="9f739-195">Configurer le certificat importé avec l’applet de commande Set-CsCertificate et utiliser le rouleau paramètre - avec le paramètre - EffectiveDate Argument.</span><span class="sxs-lookup"><span data-stu-id="9f739-195">Configure the imported certificate with the Set-CsCertificate cmdlet and use the -Roll parameter with the -EffectiveDate parameter.</span></span> <span data-ttu-id="9f739-196">La date d’effet doit être définie comme heure d’expiration du certificat actuel (14:00:00 ou 2:00:00 PM) moins 24 heures minimum.</span><span class="sxs-lookup"><span data-stu-id="9f739-196">The effective date should be defined as the current certificate expire time (14:00:00, or 2:00:00 PM) minus a minimum of 24 hours.</span></span> 
    
    <span data-ttu-id="9f739-197">Le jeu-CsCertificate de commande avec le rouleau et EffectiveTime - paramètre :</span><span class="sxs-lookup"><span data-stu-id="9f739-197">The Set-CsCertificate command with the -Roll and -EffectiveTime parameter:</span></span>
    
  ```
  Set-CsCertificate -Type OAuthTokenIssuer -Thumbprint <thumb
          print of new certificate> -Roll -EffectiveDate <date and time for
          certificate to become active> -identity Global 
  ```

<span data-ttu-id="9f739-198">Exemple de commande Set-CsCertificate :</span><span class="sxs-lookup"><span data-stu-id="9f739-198">An example Set-CsCertificate command:</span></span>
    
  ```
  Set-CsCertificate -Type OAuthTokenIssuer -Thumbprint
          "B142918E463981A76503828BB1278391B716280987B" -Roll -EffectiveDate "7/21/2015
          1:00:00 PM" 
  ```

> [!IMPORTANT]
> <span data-ttu-id="9f739-199">L’EffectiveDate argument doit être formaté pour correspondre aux paramètres de langue et la région de votre serveur.</span><span class="sxs-lookup"><span data-stu-id="9f739-199">The EffectiveDate must be formatted to match your server's region and language settings.</span></span> <span data-ttu-id="9f739-200">Cet exemple utilise le paramètre régional et linguistique Anglais (États-Unis).</span><span class="sxs-lookup"><span data-stu-id="9f739-200">The example uses the US English Region and Language settings</span></span> 
  
<span data-ttu-id="9f739-201">Quand la date d’effet est atteinte (21/7/2012 01:00:00), tous les nouveaux jetons sont émis par le nouveau certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-201">When the effective time is reached (7/21/2015 1:00:00 AM), all new tokens are issued by the new certificate.</span></span> <span data-ttu-id="9f739-202">Lors de la validation des jetons, ces derniers sont d’abord validés par rapport au nouveau certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-202">When validating tokens, tokens will first be validated against the new certificate.</span></span> <span data-ttu-id="9f739-203">Si la validation échoue, l’ancien certificat est testé.</span><span class="sxs-lookup"><span data-stu-id="9f739-203">If the validation fails, the old certificate is tried.</span></span> <span data-ttu-id="9f739-204">La procédure de test du nouveau certificat et d’utilisation de l’ancien certificat continuera jusqu’à l’expiration de l’ancien certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-204">The process of trying the new and falling back to the old certificate will continue until the expiry time of the old certificate.</span></span> <span data-ttu-id="9f739-205">Une fois l’ancien certificat expiré (22/7/2012 14:00:00), les jetons ne seront validés que par le nouveau certificat.</span><span class="sxs-lookup"><span data-stu-id="9f739-205">Once the old certificate has expired (7/22/2015 2:00:00 PM), tokens will only be validated by the new certificate.</span></span> <span data-ttu-id="9f739-206">L’ancien certificat peut être supprimé en toute sécurité à l’aide de l’applet de commande Remove-CsCertificate avec le précédent paramètre-.</span><span class="sxs-lookup"><span data-stu-id="9f739-206">The old certificate can be safely removed using the Remove-CsCertificate cmdlet with the -Previous parameter.</span></span>
```
Remove-CsCertificate -Type OAuthTokenIssuer -Previous 
```

## <a name="see-also"></a><span data-ttu-id="9f739-207">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="9f739-207">See also</span></span>

#### 

[<span data-ttu-id="9f739-208">Gérer l’authentification de serveur à serveur (OAuth) et les applications de partenaires dans Skype pour Business Server 2015</span><span class="sxs-lookup"><span data-stu-id="9f739-208">Manage server-to-server authentication (OAuth) and partner applications in Skype for Business Server 2015</span></span>](server-to-server-and-partner-applications.md)
#### 

[<span data-ttu-id="9f739-209">Ensemble-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="9f739-209">Set-CsCertificate</span></span>](https://docs.microsoft.com/powershell/module/skype/set-cscertificate?view=skype-ps)
  
[<span data-ttu-id="9f739-210">Supprimer-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="9f739-210">Remove-CsCertificate</span></span>](https://docs.microsoft.com/powershell/module/skype/remove-cscertificate?view=skype-ps)

