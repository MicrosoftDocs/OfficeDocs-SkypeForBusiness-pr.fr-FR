---
title: Configurer des applications partenaires Skype pour Business Server 2015 et Exchange Server
ms.author: jambirk
author: jambirk
manager: serdars
ms.date: 12/20/2018
ms.audience: ITPro
ms.topic: get-started-article
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 9c3a3054-6201-433f-b128-4c49d3341370
description: 'Résumé : Configurez l’authentification de serveur à serveur pour Exchange Server 2016 ou Exchange Server 2013 et Skype pour Business Server.'
ms.openlocfilehash: f437b081466f837c012e0d2ddba8bea79d3ad445
ms.sourcegitcommit: e9f277dc96265a193c6298c3556ef16ff640071d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/24/2018
ms.locfileid: "20973079"
---
# <a name="configure-partner-applications-in-skype-for-business-server-and-exchange-server"></a><span data-ttu-id="52742-103">Configurer des applications partenaires Skype pour Business Server et Exchange Server</span><span class="sxs-lookup"><span data-stu-id="52742-103">Configure partner applications in Skype for Business Server and Exchange Server</span></span>
 
<span data-ttu-id="52742-104">**Résumé :** Configurer l’authentification de serveur à serveur pour Exchange Server 2016 ou Exchange Server 2013 et Skype pour Business Server.</span><span class="sxs-lookup"><span data-stu-id="52742-104">**Summary:** Configure server to server authentication for Exchange Server 2016 or Exchange Server 2013 and Skype for Business Server.</span></span>
  
<span data-ttu-id="52742-105">L’authentification serveur à serveur requiert généralement deux serveurs qui doivent communiquer l’un avec l’autre et un serveur d’émission de jetons de sécurité tiers.</span><span class="sxs-lookup"><span data-stu-id="52742-105">Server-to-server authentication usually requires two servers that need to communicate with one another and a third-party security token server.</span></span> <span data-ttu-id="52742-106">Si le serveur A et serveur B doivent communiquer, puis les deux de ces serveurs généralement démarrer à contacter un serveur de jetons et d’obtenir un jeton de sécurité mutuellement approuvés.</span><span class="sxs-lookup"><span data-stu-id="52742-106">If Server A and Server B need to communicate, then both of those servers typically start by contacting a token server and obtaining a mutually-trusted security token.</span></span> <span data-ttu-id="52742-107">Le Serveur A présente ensuite ce jeton de sécurité au Serveur B (et inversement) afin de prouver son authenticité et sa fiabilité.</span><span class="sxs-lookup"><span data-stu-id="52742-107">Server A then presents that security token to Server B (and vice-versa) as a way to guarantee its authenticity and trustworthiness.</span></span>
  
<span data-ttu-id="52742-108">Toutefois, qui est une règle générale.</span><span class="sxs-lookup"><span data-stu-id="52742-108">However, that's a general rule.</span></span> <span data-ttu-id="52742-109">Skype pour Business Server, Exchange Server 2016, Exchange Server 2013 et SharePoint Server 2013 n’avez pas besoin d’utiliser un serveur de jetons tiers lors de la communication entre eux ; C’est parce que ces produits serveur peuvent créer des jetons de sécurité qui peuvent être acceptées par l’autre, sans la nécessité d’un serveur de jetons distinct.</span><span class="sxs-lookup"><span data-stu-id="52742-109">Skype for Business Server, Exchange Server 2016, Exchange Server 2013, and SharePoint Server 2013 do not need to use a third-party token server when communicating with one another; that's because these server products can create security tokens that can be accepted by one another without the need for a separate token server.</span></span> <span data-ttu-id="52742-110">(Cette fonctionnalité est uniquement disponible dans Skype pour Business Server, Exchange Server 2016, Exchange Server 2013 et SharePoint Server 2013.</span><span class="sxs-lookup"><span data-stu-id="52742-110">(This capability is only available in Skype for Business Server, Exchange Server 2016, Exchange Server 2013, and SharePoint Server 2013.</span></span> <span data-ttu-id="52742-111">Si vous avez besoin configurer l’authentification de serveur à serveur avec d’autres serveurs, y compris d’autres produits serveur Microsoft, puis vous devrez le faire à l’aide d’un serveur de jetons tierce.)</span><span class="sxs-lookup"><span data-stu-id="52742-111">If you need to set up server-to-server authentication with other servers, including other Microsoft server products, then you will need to do so by using a third-party token server.)</span></span>
  
<span data-ttu-id="52742-112">Pour configurer l’authentification de serveur à serveur entre Skype pour Business Server et Exchange Server, vous devez effectuer deux opérations : 1) vous devez assigner les certificats appropriés à chaque serveur ; et, 2) vous devez configurer chaque serveur pour une application partenaire de l’autre serveur : cela signifie que vous devez configurer Skype pour Business Server comme application partenaire pour Exchange Server, et vous devez configurer Exchange Server pour une application partenaire pour Skype pour un serveur d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="52742-112">In order to set up server-to-server authentication between Skype for Business Server and Exchange Server you must do two things: 1) you must assign the appropriate certificates to each server; and, 2) you must configure each server to be a partner application of the other server: that means you must configure Skype for Business Server to be a partner application for Exchange Server, and you must configure Exchange Server to be a partner application for Skype for Business Server.</span></span>
  
## <a name="configuring-skype-for-business-server-to-be-a-partner-application-for-exchange-server"></a><span data-ttu-id="52742-113">Configuration de Skype pour Business Server comme Application partenaire pour Exchange Server</span><span class="sxs-lookup"><span data-stu-id="52742-113">Configuring Skype for Business Server to be a Partner Application for Exchange Server</span></span>

<span data-ttu-id="52742-114">Pour configurer Skype pour Business Server comme application partenaire avec Exchange Server 2016 ou Exchange Server 2013, la plus simple consiste à exécuter le script Configure-enterprisepartnerapplication.ps1, un script Windows PowerShell qui est fourni avec Exchange Server.</span><span class="sxs-lookup"><span data-stu-id="52742-114">The easiest way to configure Skype for Business Server to be a partner application with Exchange Server 2016 or Exchange Server 2013 is to run the Configure-EnterprisePartnerApplication.ps1 script, a Windows PowerShell script that ships with Exchange Server.</span></span> <span data-ttu-id="52742-115">Pour exécuter ce script, vous devez fournir l’URL pour le Skype pour le document de métadonnées d’authentification Business Server ; Il sera généralement le nom de domaine complet de le Skype pour Business Server pool suivi du suffixe /metadata/json/1.</span><span class="sxs-lookup"><span data-stu-id="52742-115">To run this script, you must provide the URL for the Skype for Business Server authentication metadata document; this will typically be the fully qualified domain name of the Skype for Business Server pool followed by the suffix /metadata/json/1.</span></span> <span data-ttu-id="52742-116">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="52742-116">For example:</span></span>
  
```
https://atl-cs-001.litwareinc.com/metadata/json/1
```

<span data-ttu-id="52742-117">Pour configurer Business Server comme application partenaire Skype, ouvrez Exchange Management Shell et exécutez une commande similaire à celle-ci (en supposant que Exchange a été installé sur le lecteur c, et qu’elle utilise le chemin d’accès du dossier par défaut) :</span><span class="sxs-lookup"><span data-stu-id="52742-117">To configure Skype for Business Server as a partner application, open the Exchange Management Shell and run a command similar to this (assuming that Exchange has been installed on drive C: and that it uses the default folder path):</span></span>
  
```
"C:\Program Files\Microsoft\Exchange Server\V15\Scripts\Configure-EnterprisePartnerApplication.ps1 -AuthMetaDataUrl 'https://atl-cs-001.litwareinc.com/metadata/json/1' -ApplicationType Lync"
```

<span data-ttu-id="52742-118">Après avoir configuré l’application partenaire, il est recommandé que vous arrêtez et redémarrez Internet Information Services (IIS) sur vos serveurs d’accès client et boîte aux lettres Exchange.</span><span class="sxs-lookup"><span data-stu-id="52742-118">After configuring the partner application it is recommended that you stop and restart Internet Information Services (IIS) on your Exchange mailbox and client access servers.</span></span> <span data-ttu-id="52742-119">Vous pouvez redémarrer IIS à l’aide d’une commande semblable à la suivante, qui redémarre le service sur l’ordinateur atl-exchange-001 :</span><span class="sxs-lookup"><span data-stu-id="52742-119">You can restart IIS by using a command similar to this, which restarts the service on the computer atl-exchange-001:</span></span>
  
```
iisreset atl-exchange-001
```

<span data-ttu-id="52742-120">Cette commande peut être exécutée à partir de l’environnement Exchange Management Shell ou depuis toute fenêtre de commande s’exécutent sous privilèges d’administrateur.</span><span class="sxs-lookup"><span data-stu-id="52742-120">This command can be run from within the Exchange Management Shell or from any other command window run under administrator privileges.</span></span>
  
## <a name="configuring-exchange-server-to-be-a-partner-application-for-skype-for-business-server"></a><span data-ttu-id="52742-121">Configuration d’Exchange Server pour une Application partenaire pour Skype pour Business Server</span><span class="sxs-lookup"><span data-stu-id="52742-121">Configuring Exchange Server to be a Partner Application for Skype for Business Server</span></span>

<span data-ttu-id="52742-122">Une fois que vous avez configuré Skype pour Business Server comme application partenaire pour Exchange Server 2016 ou Exchange Server 2013, vous devez ensuite configurer Exchange Server pour une application partenaire pour Skype pour Business Server.</span><span class="sxs-lookup"><span data-stu-id="52742-122">After you have configured Skype for Business Server to be a partner application for Exchange Server 2016 or Exchange Server 2013, you must then configure Exchange Server to be a partner application for Skype for Business Server.</span></span> <span data-ttu-id="52742-123">Cela en utilisant la Skype pour Business Server Management Shell et en spécifiant le document de métadonnées d’authentification pour Exchange ; Il s’agit généralement de l’URI du service de découverte automatique Exchange suivi par le suffixe /metadata/json/1.</span><span class="sxs-lookup"><span data-stu-id="52742-123">This can be done by using the Skype for Business Server Management Shell and specifying the authentication metadata document for Exchange; this will typically be the URI of the Exchange autodiscover service followed by the suffix /metadata/json/1.</span></span> <span data-ttu-id="52742-124">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="52742-124">For example:</span></span>
  
```
https://autodiscover.litwareinc.com/autodiscover/metadata/json/1
```

<span data-ttu-id="52742-125">Dans Skype pour Business Server, les applications partenaires sont configurées à l’aide de l’applet de commande [New-CsPartnerApplication](https://docs.microsoft.com/powershell/module/skype/new-cspartnerapplication?view=skype-ps) .</span><span class="sxs-lookup"><span data-stu-id="52742-125">In Skype for Business Server, partner applications are configured by using the [New-CsPartnerApplication](https://docs.microsoft.com/powershell/module/skype/new-cspartnerapplication?view=skype-ps) cmdlet.</span></span> <span data-ttu-id="52742-126">Outre la spécification de l’URI de métadonnées vous devez également définir l’approbation d’application au niveau Full ; Cela permettra Exchange représenter elle-même et n’importe quel utilisateur autorisé dans le domaine.</span><span class="sxs-lookup"><span data-stu-id="52742-126">In addition to specifying the metadata URI you should also set the application trust level to Full; this will allow Exchange to represent both itself and any authorized user in the realm.</span></span> <span data-ttu-id="52742-127">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="52742-127">For example:</span></span>
  
```
New-CsPartnerApplication -Identity Exchange -ApplicationTrustLevel Full -MetadataUrl "https://autodiscover.litwareinc.com/autodiscover/metadata/json/1"
```

<span data-ttu-id="52742-128">Sinon, vous pouvez créer une application partenaire en copiant et modification du code de script, voir le Skype pour la documentation d’authentification de serveur à serveur Business Server.</span><span class="sxs-lookup"><span data-stu-id="52742-128">Alternatively, you can create a partner application by copying and modifying the script code found in the Skype for Business Server server-to-server authentication documentation.</span></span> <span data-ttu-id="52742-129">Consultez l’article [gérer l’authentification de serveur à serveur (OAuth) et des applications partenaires dans Skype pour Business Server](../../manage/authentication/server-to-server-and-partner-applications.md) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="52742-129">See the [Manage server-to-server authentication (OAuth) and partner applications in Skype for Business Server](../../manage/authentication/server-to-server-and-partner-applications.md) article for more information.</span></span>
  
<span data-ttu-id="52742-130">Si vous avez configuré correctement les applications partenaires pour les deux Skype pour Business Server et Exchange Server, vous avez également correctement configuré l’authentification de serveur à serveur entre les deux produits.</span><span class="sxs-lookup"><span data-stu-id="52742-130">If you have successfully configured partner applications for both Skype for Business Server and Exchange Server, you have also successfully configured server-to-server authentication between the two products.</span></span> <span data-ttu-id="52742-131">Skype pour Business Server inclut une applet de commande Windows PowerShell, [Test-CsExStorageConnectivity](https://docs.microsoft.com/powershell/module/skype/test-csexstorageconnectivity?view=skype-ps) qui vous permet de vérifier que l’authentification de serveur à serveur a été correctement configurée et que la Skype pour le Service de stockage Business Server peut Connectez-vous au serveur Exchange.</span><span class="sxs-lookup"><span data-stu-id="52742-131">Skype for Business Server includes a Windows PowerShell cmdlet, [Test-CsExStorageConnectivity](https://docs.microsoft.com/powershell/module/skype/test-csexstorageconnectivity?view=skype-ps) which enables you to verify that server-to-server authentication has been correctly configured and that the Skype for Business Server Storage Service can connect to Exchange Server.</span></span> <span data-ttu-id="52742-132">L’applet de commande effectue cette action en se connectant à la boîte aux lettres d’un utilisateur Exchange Server, écriture d’un élément dans le dossier historique des conversations de cet utilisateur, puis supprimez (le cas échéant) que cet élément.</span><span class="sxs-lookup"><span data-stu-id="52742-132">The cmdlet does this by connecting to the mailbox of an Exchange Server user, writing an item into the Conversation History folder for that user, and then (optionally) deleting that item.</span></span>
  
<span data-ttu-id="52742-133">Pour tester l’intégration de Skype pour Business Server et Exchange Server, exécutez une commande semblable à ce qui suit à partir de la Skype pour Business Server Management Shell :</span><span class="sxs-lookup"><span data-stu-id="52742-133">To test the integration of Skype for Business Server and Exchange Server, run a command similar to the following from the Skype for Business Server Management Shell:</span></span>
  
```
Test-CsExStorageConnectivity -SipUri "sip:kenmyer@litwareinc.com"
```

<span data-ttu-id="52742-134">Dans la commande précédente, SipUri représente l’adresse SIP d’un utilisateur avec un compte sur le serveur Exchange. votre commande échouera dans ce n’est pas un compte d’utilisateur valide.</span><span class="sxs-lookup"><span data-stu-id="52742-134">In the preceding command, the SipUri represents the SIP address of a user with an account on Exchange Server; your command will fail in this is not a valid user account.</span></span>
  
> [!NOTE]
> <span data-ttu-id="52742-135">Si vous recevez une réponse 401 à partir de cette applet de commande, c’est probablement que la configuration par défaut pour Exchange n’inclut pas de prise en charge pour accepter les jetons Oauth.</span><span class="sxs-lookup"><span data-stu-id="52742-135">If you receive a 401 response from this cmdlet, it is probably because the default configuration for Exchange does not include support for accepting Oauth tokens.</span></span> <span data-ttu-id="52742-136">Pour plus d’informations sur l’utilisation d’Oauth dans Exchange, voir [authentification OAuth configurer avec SharePoint 2013 et Skype pour Business Server](https://go.microsoft.com/fwlink/p/?LinkId=513103).</span><span class="sxs-lookup"><span data-stu-id="52742-136">For more information about using Oauth in Exchange, see [Configure OAuth authentication with SharePoint 2013 and Skype for Business Server](https://go.microsoft.com/fwlink/p/?LinkId=513103).</span></span> 
  
<span data-ttu-id="52742-137">Si le test réussit et que la connectivité a été établie, vous pouvez passer à la configuration de fonctionnalités facultatives telles que l’intégration de l’archivage et le magasin de contacts unifié.</span><span class="sxs-lookup"><span data-stu-id="52742-137">If the test succeeds and connectivity has been established, you can then proceed to configure optional features such as archiving integration and the unified contact store.</span></span>