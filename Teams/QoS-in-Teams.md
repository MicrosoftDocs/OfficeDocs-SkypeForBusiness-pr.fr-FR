---
title: "Qualité de service (QoS) dans Microsoft Teams"
author: rmw2890
ms.author: MyAdvisor
manager: Serdars
ms.date: 02/16/2018
ms.topic: article
ms.service: msteams
description: "Préparez le réseau de votre organisation à la qualité de service (QoS) dans Microsoft Teams."
MS.collection: Strat_MT_TeamsAdmin
ms.openlocfilehash: 61bebd64c7d1478c16e114631b696dee2bf59625
ms.sourcegitcommit: 85105cb4e42ae8eb6e7e76eaf6d4dd5b9568cf41
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/19/2018
---
<a name="quality-of-service-qos-in-microsoft-teams"></a><span data-ttu-id="9e4c4-103">Qualité de service (QoS) dans Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="9e4c4-103">Quality of Service (QoS) in Microsoft Teams</span></span>
==========================================
<span data-ttu-id="9e4c4-104">Ce guide vous aidera à préparer le réseau de votre organisation à la qualité de service (QoS) dans Teams.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-104">This guide will help you prepare your organization's network for Quality of Service (QoS) in Teams.</span></span>


<span data-ttu-id="9e4c4-105">La qualité de service (QoS) est un mécanisme permettant de classer par ordre de priorité certains types de trafic réseau.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-105">Quality of Service (QoS) is a mechanism that lets you prioritize certain types of network traffic.</span></span> <span data-ttu-id="9e4c4-106">Classer le trafic par ordre de priorité pour les communications en temps réel telles que Teams est important pour offrir une expérience utilisateur de niveau professionnel.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-106">Prioritizing the traffic for real-time communications services such as Teams is important in order to deliver a business-grade user experience.</span></span> <span data-ttu-id="9e4c4-107">Pour que la qualité de service soit réellement performante, une connexion pouvant la prendre en charge doit être configurée de bout en bout (PC, commutateurs réseau et routeurs vers le cloud) car si une partie dans le chemin réseau ne peut pas la prendre en charge, la qualité de l'intégralité de l’appel peut être dégradée.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-107">For QoS to be truly effective, a QoS-capable connection must be configured end-to-end (PC, network switches, and routers to the cloud), because any part in the path that fails to support QoS could degrade the quality of the entire call.</span></span>


![Capture d’écran d’un diagramme illustrant la relation entre les réseaux d'une organisation et les services Office 365.](media/Qos-in-Teams-Image1.png)

 

<span data-ttu-id="9e4c4-109">Dans la plupart des cas, le réseau d'interconnexion sera un réseau non géré, une connexion Internet.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-109">In most cases, the interconnect network will be an unmanaged network, an internet connection.</span></span> <span data-ttu-id="9e4c4-110">Une option disponible pour corriger la qualité de service de bout en bout est [ExpressRoute](https://azure.microsoft.com/documentation/articles/expressroute-introduction/).</span><span class="sxs-lookup"><span data-stu-id="9e4c4-110">One option available to address end-to-end QoS is [ExpressRoute](https://azure.microsoft.com/documentation/articles/expressroute-introduction/).</span></span> <span data-ttu-id="9e4c4-111">Nous recommandons d’implémenter la qualité de service sur les parties du réseau que vous contrôlez, c’est-à-dire votre réseau sur site.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-111">It is our recommendation to still implement QoS on the portions of the network you have control over, namely your on-premises network.</span></span> <span data-ttu-id="9e4c4-112">La qualité des charges de travail de communication en temps réel sera ainsi améliorée dans votre déploiement, et les goulots d’étranglement dans votre déploiement existant seront réduits.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-112">This will increase the quality of real time communication workloads throughout your deployment and will alleviate choke points in your existing deployment.</span></span> 

## <a name="objectives"></a><span data-ttu-id="9e4c4-113">Objectifs</span><span class="sxs-lookup"><span data-stu-id="9e4c4-113">Objectives</span></span> 

<span data-ttu-id="9e4c4-114">Ce guide sera axé sur la procédure de hiérarchisation du trafic des communications en temps réel, c’est-à-dire les communications vocales et vidéo.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-114">This guide will focus on how to prioritize Teams real-time communications traffic, namely voice and video.</span></span> <span data-ttu-id="9e4c4-115">Les autres types de trafic peuvent également être hiérarchisés en fonction de vos besoins.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-115">Other types of traffic can also be prioritized based on your needs.</span></span>

<span data-ttu-id="9e4c4-116">Il existe plusieurs façons de classer le trafic par ordre de priorité, mais la plus courante consiste à utiliser des marquages DSCP (Differentiated Services Code Point).</span><span class="sxs-lookup"><span data-stu-id="9e4c4-116">There are multiple ways to prioritize traffic, but the most common is by using differentiated services code point (DSCP) markings.</span></span> <span data-ttu-id="9e4c4-117">Ils peuvent être appliqués en fonction des plages de ports mais également par le biais d’objets de stratégie de groupe.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-117">They can be applied based on port ranges but also via Group Policy objects.</span></span> <span data-ttu-id="9e4c4-118">Nous aborderons les deux dans ce document.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-118">We will cover both in this document.</span></span>

<span data-ttu-id="9e4c4-119">Contrôler le marquage DSCP via des objets de stratégie de groupe (GPO) permet de s’assurer que les ordinateurs avec jonction à un domaine reçoivent les paramètres corrects, et que ces paramètres ne peuvent être gérés que par un administrateur.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-119">Controlling the DSCP marking via Group Policy objects (GPO) ensures that domain-joined computers receive the correct settings and that these settings can only be managed by an administrator.</span></span> 

<span data-ttu-id="9e4c4-120">Il est important de comprendre que la qualité de service ne fonctionne que lorsqu’elle est implémentée sur toutes les liaisons connectant l’appelant à l’appelé.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-120">It’s important to understand that QoS only works when implemented on all links connecting caller to callee.</span></span> <span data-ttu-id="9e4c4-121">Si nous l’utilisons sur le réseau interne et qu'un utilisateur se connecte depuis un emplacement distant, nous ne pouvons la hiérarchiser qu’au sein de notre réseau interne et géré.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-121">If we use QoS on the internal network and a user signs in from a remote location, we can only prioritize within our internal, managed, network.</span></span> <span data-ttu-id="9e4c4-122">Tandis que les emplacements distants peuvent recevoir une connexion gérée en implémentant un réseau privé virtuel, il est déconseillé d’exécuter le trafic des communications en temps réel sur le VPN.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-122">While remote locations could receive a managed connection by implementing a VPN, it is not recommended to run real-time communications traffic over the VPN.</span></span>

> [!NOTE]
> <span data-ttu-id="9e4c4-123">Afin d’améliorer l’expérience utilisateur, nous recommandons d’implémenter une tunnellisation fractionnée pour les utilisateurs distants connectés au VPN.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-123">Our recommendation is to implement split tunneling for VPN connected remote users to maximize the user experience.</span></span> <span data-ttu-id="9e4c4-124">Reportez-vous au document [Déployer-Guide-Tunnel fractionné VPN](https://myadvisor.fasttrack.microsoft.com/CloudVoice/Downloads?SelectedIDs=5_1_0_9 ) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-124">See the document [Deploy-Guidance-VPN Split Tunnel](https://myadvisor.fasttrack.microsoft.com/CloudVoice/Downloads?SelectedIDs=5_1_0_9 ) for more information.</span></span>

<span data-ttu-id="9e4c4-125">Dans une organisation mondiale avec des liaisons gérées réparties sur plusieurs continents, la qualité de service est fortement recommandée car la bande passante est limitée par rapport au réseau local.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-125">In a global organization with managed links spanning continents, QoS is highly recommended since the bandwidth is limited in comparisons to the local network (LAN).</span></span>

## <a name="quality-of-service"></a><span data-ttu-id="9e4c4-126">Qualité de service</span><span class="sxs-lookup"><span data-stu-id="9e4c4-126">Managing Quality of Service</span></span>

<span data-ttu-id="9e4c4-127">Pour fournir un niveau de service garanti pour une application sur le réseau, les périphériques réseau sous-jacents doivent disposer d’un moyen de classifier les différents types de trafic.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-127">In order to provide a guaranteed level of service for an application on the network, the underlying network devices must have a way to classify different types of traffic.</span></span> <span data-ttu-id="9e4c4-128">Un routeur, par exemple, doit pouvoir distinguer le trafic vocal du trafic de navigation sur le Web normal, s’il est attendu que le trafic vocal bénéficie d’un meilleur traitement.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-128">A router, for example, must be able to distinguish between voice traffic and normal web browsing traffic, if there is an expectation that voice receives better treatment.</span></span> 

<span data-ttu-id="9e4c4-129">Les services différenciés (DiffServ) fournissent une infrastructure dans laquelle le trafic est traité par périphériques réseau, avec des priorités basées sur le champ ToS (type de services) dans l’en-tête d’un paquet IPv4/IPv6.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-129">Differentiated Services (DiffServ) provides a framework in which traffic is treated by network devices with priorities based on the type of services (ToS) field in the header of an IPv4/IPv6 packet.</span></span> <span data-ttu-id="9e4c4-130">Les octets les plus significatifs du champ DiffServ sont appelés DSCP (Differentiated Services Code Point).</span><span class="sxs-lookup"><span data-stu-id="9e4c4-130">The six most significant bits of the DiffServ field is known as the Differentiated Services Code Point, or DSCP.</span></span> <span data-ttu-id="9e4c4-131">En utilisant cette infrastructure, le trafic peut être classifié en tant que type de trafic spécifique (vocal) puis marqué (101110 ou 46 en valeur décimale), de telle sorte que lorsque les périphériques réseau traitent ces marquages, le trafic puisse être classé par ordre de priorité en conséquence (acheminement accéléré dans cet exemple).</span><span class="sxs-lookup"><span data-stu-id="9e4c4-131">Using this framework, traffic can be classified as a particular type of traffic (voice), and then marked (101110, or 46 in decimal), such that when network devices process these markings, the traffic can be prioritized accordingly (Expedited Forwarding, in this example).</span></span>

<span data-ttu-id="9e4c4-132">Lorsque le trafic réseau entre dans un routeur, il est placé dans une file d’attente. S’il n’y a pas de QoS en place, il n’existe essentiellement qu'une seule file d’attente et les données sont traitées sur la base du premier entré, premier sorti. Cela signifie que le trafic vocal (qui est très sensible aux délais) pourrait être bloqué derrière le trafic des services de diffusion en ligne.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-132">When network traffic enters a router, the traffic is placed into a queue – if there is no QoS in place, essentially there is only one queue, and data is treated as first-in, first-out. That means voice traffic (which is very sensitive to delays) could get stuck behind traffic from online streaming services.</span></span> <span data-ttu-id="9e4c4-133">Lors de l’implémentation de la qualité de service, plusieurs files d’attente peuvent être définies, avec des fonctionnalités de gestion des surcharges différentes (telles que PQ, Priority Queuing de Cisco et CBWFQ, Class Based Weighted Fair Queue) et des fonctionnalités d'évitement de surcharge (comme WRED, Weighted Random Early Detection).</span><span class="sxs-lookup"><span data-stu-id="9e4c4-133">When implementing QoS, multiple queues can be defined, with different congestion management features (such as Cisco’s Priority Queuing (PQ) and Class Based Weighted Fair Queue (CBWFQ)) and congestion avoidance features (such as Weighted Random Early Detection (WRED)).</span></span>

![Capture d’écran d’un diagramme illustrant les files d’attente QoS dans Teams.](media/Qos-in-Teams-Image2.png)

<span data-ttu-id="9e4c4-135">Figure 1 : files d’attente QoS visualisées</span><span class="sxs-lookup"><span data-stu-id="9e4c4-135">Figure 1: QoS queues visualized</span></span>

<span data-ttu-id="9e4c4-136">Une fois ces éléments en place, une qualité de service prévisible peut être fournie, le réseau géré sous-jacent comprenant maintenant comment classifier, marquer et classer par ordre de priorité le trafic.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-136">Once these pieces are in place, a predictable quality of service can be delivered, as the underlying managed network now understands how to classify, mark and prioritize traffic.</span></span> <span data-ttu-id="9e4c4-137">Du point de vue de Teams, l’élément de configuration le plus important est la classification et le marquage des paquets, mais une planification rigoureuse est nécessaire pour aligner la configuration de l’application sur celle du réseau sous-jacent afin que la qualité de service de bout en bout soit réussie.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-137">From the Teams perspective, the most important configuration item is the classification and marking of packets – but careful planning is involved to align the application’s configuration with the underlying network configuration for end-to-end QoS to be successful.</span></span>

## <a name="qos-scenarios"></a><span data-ttu-id="9e4c4-138">Scénarios de qualité de service</span><span class="sxs-lookup"><span data-stu-id="9e4c4-138">QoS scenarios</span></span>

<span data-ttu-id="9e4c4-139">Lors de l’implémentation de la qualité de service pour Teams, nous avons basé nos conseils sur quatre scénarios de départ :</span><span class="sxs-lookup"><span data-stu-id="9e4c4-139">When implementing QoS for Teams, we’ve based our guidance on four starting scenarios:</span></span>

1.  <span data-ttu-id="9e4c4-140">Vous avez déployé ou déployez Teams et vous prévoyez d’implémenter la qualité de service par le biais du marquage selon les ports.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-140">You’ve deployed or are deploying Teams and are planning on implementing QoS via Port Based Tagging.</span></span> <span data-ttu-id="9e4c4-141">Le marquage selon les ports est la méthode la plus fiable, car elle fonctionne universellement sur toutes les plateformes et elle est la plus simple à implémenter.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-141">Port Based Tagging is the most reliable method since it works universally throughout all platforms and is the easiest to implement.</span></span> 

2.  <span data-ttu-id="9e4c4-142">Vous avez déployé ou déployez Teams et vous prévoyez d’implémenter la qualité de service par le biais du marquage des objets de stratégie de groupe.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-142">You’ve deployed or are deploying Teams and are planning to implement QoS via Group Policy Object tagging.</span></span> <span data-ttu-id="9e4c4-143">Cette méthode est parfois utilisée en conjonction avec le scénario 1.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-143">This is sometimes used in combination with scenario 1.</span></span> <span data-ttu-id="9e4c4-144">Tandis que ce scénario est entièrement valide et décrit ci-dessous, il est important de comprendre que cela fonctionnera uniquement pour les clients Windows avec jonction à un domaine.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-144">While this scenario is entirely valid and described below, it is important to understand this will only work for Domain Joined Windows Clients.</span></span> <span data-ttu-id="9e4c4-145">Le marquage QoS/DSCP ne sera appliqué sur aucun des périphériques qui ne sont pas un client Windows avec jonction à un domaine.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-145">Any device that is not a Windows Domain Joined Client will not be enabled for QoS\DSCP Tagging.</span></span> 

3.  <span data-ttu-id="9e4c4-146">Vous avez déployé Skype Entreprise Online avec le marquage QoS et vous déployez maintenant Teams.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-146">You have Skype for Business Online deployed including QoS Tagging and are now deploying Teams.</span></span> <span data-ttu-id="9e4c4-147">Si tel est le cas, Teams respectera la configuration existante et utilisera les même plages de ports et marquage que le client Skype Entreprise.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-147">If this is you, Teams will respect the existing configuration and will use the same port ranges and tagging as the Skype for Business client.</span></span> <span data-ttu-id="9e4c4-148">Aucune autre configuration ne devrait être nécessaire.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-148">No additional configuration should be needed.</span></span> 
    > [!NOTE]
    > <span data-ttu-id="9e4c4-149">Si vous utilisez le marquage QoS par nom d’application par le biais d’une stratégie de groupe, vous devez ajouter « Teams.exe » comme nom d’application.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-149">If you're using Application Name QoS tagging via Group Policy you should add “Teams.exe” as Application Name.</span></span>
4.  <span data-ttu-id="9e4c4-150">Vous avez déployé ou vous déployez Teams et souhaitez implémenter la qualité de service par le biais du marquage selon les ports avec une plage de ports personnalisée.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-150">You’ve deployed or are deploying Teams and want to implement QoS via port-based tagging with a custom port range.</span></span>

## <a name="recommended-differentiated-services-code-point-dscp-markings"></a><span data-ttu-id="9e4c4-151">Marquages DSCP (differentiated services code point) recommandés</span><span class="sxs-lookup"><span data-stu-id="9e4c4-151">Recommended differentiated services code point (DSCP) markings</span></span>

<span data-ttu-id="9e4c4-152">La première étape consiste à classifier les flux de trafic (comme audio et vidéo) en utilisant les plages de ports uniques et qui ne se chevauchent pas avec une valeur DSCP.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-152">The first step is to classify the traffic flows (such as audio and video) by leveraging the unique, non-overlapping port ranges with a DSCP-value.</span></span> <span data-ttu-id="9e4c4-153">La valeur DSCP attribuée ici déterminera la priorité du trafic qui transite sur le réseau (selon la configuration du réseau).</span><span class="sxs-lookup"><span data-stu-id="9e4c4-153">The DSCP value assigned here will determine the priority of the traffic going through the network (based on the network configuration).</span></span> <span data-ttu-id="9e4c4-154">Chaque charge de travail obtient sa propre valeur DSCP, bien que certains clients puissent obtenir la même valeur sur le trafic vocal et vidéo, leur donnant la même priorité sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-154">Each workload gets its own DSCP value, although some customers might set the same value on voice and video, giving them the same priority in the network.</span></span> 

<span data-ttu-id="9e4c4-155">La valeur DSCP à utiliser dépend de la priorité donnée à une charge de travail.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-155">What DSCP value to use depends on how a workload is prioritized.</span></span> <span data-ttu-id="9e4c4-156">Par exemple, les exigences de l’entreprise peuvent imposer que le partage d’application soit traité avec le même niveau de priorité que la vidéo (et soit donc marqué avec la même valeur DSCP que la vidéo).</span><span class="sxs-lookup"><span data-stu-id="9e4c4-156">For example, business requirements could dictate that application sharing is to be treated with the same level of priority as video (and as such, marked with the same DSCP-value as video).</span></span> <span data-ttu-id="9e4c4-157">D’autres environnements peuvent avoir déjà une stratégie QoS en place.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-157">Other environments might have an existing QoS strategy in place already.</span></span> 

<span data-ttu-id="9e4c4-158">Le tableau 1 ci-dessous présente les marquages DSCP requis lorsque l’application Teams est utilisée avec ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-158">Table 1 below shows the required DSCP markings when utilizing Teams with ExpressRoute.</span></span> <span data-ttu-id="9e4c4-159">Cela peut être un bon point de départ pour les clients qui ne savent pas quoi utiliser dans leur propre environnement.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-159">This could serve as a good starting point for customers unsure what to use in their own environment.</span></span> <span data-ttu-id="9e4c4-160">Pour des informations complémentaire, consultez les [Exigences de qualité de service d’ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-qos).</span><span class="sxs-lookup"><span data-stu-id="9e4c4-160">To learn more, read [ExpressRoute QoS requirements](https://docs.microsoft.com/azure/expressroute/expressroute-qos).</span></span>


| <span data-ttu-id="9e4c4-161">Port source du client</span><span class="sxs-lookup"><span data-stu-id="9e4c4-161">Client source port</span></span>|<span data-ttu-id="9e4c4-162">Protocole</span><span class="sxs-lookup"><span data-stu-id="9e4c4-162">Protocol</span></span>|<span data-ttu-id="9e4c4-163">Catégorie de médias</span><span class="sxs-lookup"><span data-stu-id="9e4c4-163">Media category</span></span>|<span data-ttu-id="9e4c4-164">Valeur DSCP courante</span><span class="sxs-lookup"><span data-stu-id="9e4c4-164">Common DSCP value</span></span>|<span data-ttu-id="9e4c4-165">Classe DSCP</span><span class="sxs-lookup"><span data-stu-id="9e4c4-165">DSCP class</span></span>|
|---------|---------|---------|---------|---------|
| <span data-ttu-id="9e4c4-166">50 000 – 50 019</span><span class="sxs-lookup"><span data-stu-id="9e4c4-166">50,000 – 50,019</span></span>|<span data-ttu-id="9e4c4-167">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="9e4c4-167">TCP/UDP</span></span>|<span data-ttu-id="9e4c4-168">Audio</span><span class="sxs-lookup"><span data-stu-id="9e4c4-168">Audio</span></span>|<span data-ttu-id="9e4c4-169">46</span><span class="sxs-lookup"><span data-stu-id="9e4c4-169">46</span></span>|<span data-ttu-id="9e4c4-170">Acheminement accéléré (EF)</span><span class="sxs-lookup"><span data-stu-id="9e4c4-170">Expedited Forwarding (EF)</span></span>|
| <span data-ttu-id="9e4c4-171">50 020 – 50 039</span><span class="sxs-lookup"><span data-stu-id="9e4c4-171">50,020 – 50,039</span></span>|<span data-ttu-id="9e4c4-172">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="9e4c4-172">TCP/UDP</span></span>|<span data-ttu-id="9e4c4-173">Vidéo</span><span class="sxs-lookup"><span data-stu-id="9e4c4-173">Video</span></span>|<span data-ttu-id="9e4c4-174">34</span><span class="sxs-lookup"><span data-stu-id="9e4c4-174">3-4</span></span>|<span data-ttu-id="9e4c4-175">Acheminement assuré (AF41)</span><span class="sxs-lookup"><span data-stu-id="9e4c4-175">Assured Forwarding (AF41)</span></span>|
| <span data-ttu-id="9e4c4-176">50 040 – 50 059</span><span class="sxs-lookup"><span data-stu-id="9e4c4-176">50,040 – 50,059</span></span>|<span data-ttu-id="9e4c4-177">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="9e4c4-177">TCP/UDP</span></span>|<span data-ttu-id="9e4c4-178">Partage d’application/de bureau et transfert de fichiers</span><span class="sxs-lookup"><span data-stu-id="9e4c4-178">Application/Desktop Sharing and File Transfer</span></span>|<span data-ttu-id="9e4c4-179">18</span><span class="sxs-lookup"><span data-stu-id="9e4c4-179">18</span></span>|<span data-ttu-id="9e4c4-180">Sélecteur de classe (CS3)</span><span class="sxs-lookup"><span data-stu-id="9e4c4-180">Class Selector (CS3)</span></span>|

<span data-ttu-id="9e4c4-181">Tableau 1 : marquages DSCP</span><span class="sxs-lookup"><span data-stu-id="9e4c4-181">Table 1: DSCP markings</span></span>

<span data-ttu-id="9e4c4-182">Voici quelques précisions à comprendre lorsque vous utilisez les informations du tableau 1 :</span><span class="sxs-lookup"><span data-stu-id="9e4c4-182">Here are some caveats to understand when you use the information in Table 1:</span></span>

- <span data-ttu-id="9e4c4-183">Le partage de fichiers et le partage d’application utilisent la même plage de ports sources, et utiliseront donc les mêmes marquages DSCP lorsque le marquage selon les ports est utilisé.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-183">File sharing and application sharing use the same source port range – and as such, would use the same DSCP markings when using Port Based Tagging.</span></span> <span data-ttu-id="9e4c4-184">Pour cette raison, il est nécessaire de déterminer la priorité qui s’applique le plus aux *deux* modalités (interactive ou par défaut).</span><span class="sxs-lookup"><span data-stu-id="9e4c4-184">Because of this, it should be determined which priority is most applicable to *both* modalities (Interactive or Default).</span></span>
    
- <span data-ttu-id="9e4c4-185">S’il est prévu d’implémenter ExpressRoute à l’avenir et que la qualité de service n’a pas encore été implémentée, il est recommandé de suivre les conseils fournis ci-dessus afin que les valeurs DSCP soient les mêmes de l’expéditeur au destinataire.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-185">If there’s a plan to implement ExpressRoute in the future and QoS has not yet been implemented, the recommendation is to follow the guidance given above so that DSCP values are the same from sender to receiver.</span></span> 
    
## <a name="source-ports-used-by-teams"></a><span data-ttu-id="9e4c4-186">Ports sources utilisés par Teams</span><span class="sxs-lookup"><span data-stu-id="9e4c4-186">Source ports used by Teams</span></span>

<span data-ttu-id="9e4c4-187">Dans Teams, la qualité de service doit être configurée selon les ports sources utilisés par les différentes charges de travail.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-187">In Teams, QoS should be configured based on the source ports used by the different workloads.</span></span> <span data-ttu-id="9e4c4-188">Les plages de ports, aussi bien côté serveur que côté client, ne sont pas configurables à ce stade.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-188">Both server-side and client-side port ranges are non-configurable at this point.</span></span> 

<span data-ttu-id="9e4c4-189">Pour déployer la qualité de service, utilisez les plages de ports sources répertoriées dans le Tableau 2 avec leurs marquages DSCP QoS associés.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-189">To deploy QoS, use the client source port ranges listed in Table 2, with their associated QoS DSCP markings.</span></span>

| <span data-ttu-id="9e4c4-190">Port source du client</span><span class="sxs-lookup"><span data-stu-id="9e4c4-190">Client source port</span></span>|<span data-ttu-id="9e4c4-191">Protocole</span><span class="sxs-lookup"><span data-stu-id="9e4c4-191">Protocol</span></span>|<span data-ttu-id="9e4c4-192">Catégorie de médias</span><span class="sxs-lookup"><span data-stu-id="9e4c4-192">Media category</span></span>|<span data-ttu-id="9e4c4-193">Valeur DSCP courante</span><span class="sxs-lookup"><span data-stu-id="9e4c4-193">Common DSCP value</span></span>|<span data-ttu-id="9e4c4-194">Classe DSCP</span><span class="sxs-lookup"><span data-stu-id="9e4c4-194">DSCP class</span></span>|
|---------|---------|---------|---------|---------|
| <span data-ttu-id="9e4c4-195">50 000 – 50 019</span><span class="sxs-lookup"><span data-stu-id="9e4c4-195">50,000 – 50,019</span></span>|<span data-ttu-id="9e4c4-196">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="9e4c4-196">TCP/UDP</span></span>|<span data-ttu-id="9e4c4-197">Audio</span><span class="sxs-lookup"><span data-stu-id="9e4c4-197">Audio</span></span>|<span data-ttu-id="9e4c4-198">46</span><span class="sxs-lookup"><span data-stu-id="9e4c4-198">46</span></span>|<span data-ttu-id="9e4c4-199">Acheminement accéléré (EF)</span><span class="sxs-lookup"><span data-stu-id="9e4c4-199">Expedited Forwarding (EF)</span></span>|
| <span data-ttu-id="9e4c4-200">50 020 – 50 039</span><span class="sxs-lookup"><span data-stu-id="9e4c4-200">50,020 – 50,039</span></span>|<span data-ttu-id="9e4c4-201">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="9e4c4-201">TCP/UDP</span></span>|<span data-ttu-id="9e4c4-202">Vidéo</span><span class="sxs-lookup"><span data-stu-id="9e4c4-202">Video</span></span>|<span data-ttu-id="9e4c4-203">34</span><span class="sxs-lookup"><span data-stu-id="9e4c4-203">3-4</span></span>|<span data-ttu-id="9e4c4-204">Acheminement assuré (AF41)</span><span class="sxs-lookup"><span data-stu-id="9e4c4-204">Assured Forwarding (AF41)</span></span>|
| <span data-ttu-id="9e4c4-205">50 040 – 50 059</span><span class="sxs-lookup"><span data-stu-id="9e4c4-205">50,040 – 50,059</span></span>|<span data-ttu-id="9e4c4-206">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="9e4c4-206">TCP/UDP</span></span>|<span data-ttu-id="9e4c4-207">Partage d’application/de bureau et transfert de fichiers</span><span class="sxs-lookup"><span data-stu-id="9e4c4-207">Application/Desktop Sharing and File Transfer</span></span>|<span data-ttu-id="9e4c4-208">18</span><span class="sxs-lookup"><span data-stu-id="9e4c4-208">18</span></span>|<span data-ttu-id="9e4c4-209">Sélecteur de classe (CS3)</span><span class="sxs-lookup"><span data-stu-id="9e4c4-209">Class Selector (CS3)</span></span>|

<span data-ttu-id="9e4c4-210">Tableau 2 : plages de ports sources du client</span><span class="sxs-lookup"><span data-stu-id="9e4c4-210">Table 2: Client source port ranges</span></span>

> [!NOTE]
> <span data-ttu-id="9e4c4-211">Si vous avez déjà configuré la qualité de service selon les plages de ports sources pour Skype Entreprise Online, la même configuration s’appliquera à Teams et aucune autre modification n’est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-211">If you've already configured QoS based on source port ranges for Skype for Business Online, the same configuration will apply to Teams and no further changes are required.</span></span> <span data-ttu-id="9e4c4-212">Si vous avez déployé Skype Entreprise Server (sur site), vous devrez modifier vos stratégies QoS.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-212">If you’ve deployed Skype for Business Server (on premises), you will need to redesign your QoS Policies.</span></span>

## <a name="setting-differentiated-services-code-point-dscp-markings"></a><span data-ttu-id="9e4c4-213">Définition des marquages DSCP (differentiated services code point)</span><span class="sxs-lookup"><span data-stu-id="9e4c4-213">Setting differentiated services code point (DSCP) markings</span></span>

<span data-ttu-id="9e4c4-214">Il existe plusieurs approches pour définir les marquages DSCP pour la classification du trafic.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-214">There are multiple approaches to setting the proper DSCP markings for traffic classification.</span></span>

- <span data-ttu-id="9e4c4-215">Marquage DSCP au point de terminaison : il s’agit de l’option préférée en général, le point de terminaison lui-même fournissant les marquages corrects.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-215">DSCP marking at the endpoint: This is the preferred option in general, as the endpoint itself is providing the proper markings.</span></span> <span data-ttu-id="9e4c4-216">Ce marquage peut être effectué actuellement en utilisant un objet de stratégie de groupe, mais il est possible uniquement sur des clients Windows avec jonction à un domaine.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-216">Currently this could be done by using a GPO, but this is only possible on domain-joined Windows clients.</span></span> <span data-ttu-id="9e4c4-217">Les clients Mac OSX et mobiles, par exemple, ne fournissent pas de mécanisme pour marquer le trafic avec des valeurs DSCP.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-217">Mac OSX or mobile clients, for example, do not provide a mechanism to mark traffic with DSCP values.</span></span>

- <span data-ttu-id="9e4c4-218">Selon les ports en utilisant des listes de contrôle d’accès sur les routeurs : il s’agit d’une option très courante dans les environnements hétérogènes Windows et Mac.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-218">Port-based using ACLs on routers: This is a very common option encountered in heterogeneous environments of Windows and Mac.</span></span> <span data-ttu-id="9e4c4-219">Dans ce scénario, l’équipe en charge du réseau marque le trafic sur les routeurs d’entrée/sortie (généralement sur le réseau étendu, WAN) selon les plages de ports sources définies pour chaque modalité.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-219">In this scenario, the network team marks the traffic at the ingress/egress routers (typically on the Wide Area Network (WAN)) based on the source port ranges defined for each modality.</span></span> <span data-ttu-id="9e4c4-220">Cette option fonctionne sur toutes les plateformes mais seul le bord WAN est marqué - pas jusqu’à l’ordinateur client - et elle implique des tâches de gestion.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-220">While this works across platforms, it only marks at the WAN edge – not all the way to the client machine – and incurs management overhead.</span></span>
    
- <span data-ttu-id="9e4c4-221">Une combinaison de marquages DSCP au niveau du client et des listes de contrôle d’accès basées sur les ports au niveau des routeurs.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-221">A combination of DSCP markings on the client and port-based ACLs on routers.</span></span>
    
<span data-ttu-id="9e4c4-222">Si cela est possible, nous recommandons une combinaison des deux : utiliser un objet de stratégie de groupe pour intercepter une majorité de clients, ainsi qu'un marquage DSCP selon les ports pour garantir que les clients mobiles, Mac et les autres clients continueront à bénéficier d'un traitement QoS (partiel).</span><span class="sxs-lookup"><span data-stu-id="9e4c4-222">If possible, we recommend a combination of both, to use a GPO to catch the majority of clients, and to also use port based DSCP tagging to ensure mobile clients, Mac and other clients will still get a (partial) QoS treatment.</span></span>

<span data-ttu-id="9e4c4-223">La définition de la valeur DSCP pour la plage de ports sources prédéfinie peut être effectuée sur le client Teams en utilisant une qualité de service basée sur une stratégie au sein de la stratégie de groupe.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-223">Setting the DSCP value for the pre-defined source port range in the Teams client can be done using policy-based QoS within Group Policy.</span></span> <span data-ttu-id="9e4c4-224">Les tableaux suivants utilisent les plages de ports spécifiées dans le tableau pour créer une stratégie pour chaque charge de travail.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-224">The following table uses the port ranges specified in the table to create a policy for each workload.</span></span>

| <span data-ttu-id="9e4c4-225">Type de trafic du client</span><span class="sxs-lookup"><span data-stu-id="9e4c4-225">Client traffic type</span></span>|<span data-ttu-id="9e4c4-226">Début de la plage de ports</span><span class="sxs-lookup"><span data-stu-id="9e4c4-226">Port range start</span></span>|<span data-ttu-id="9e4c4-227">Fin de la plage de ports</span><span class="sxs-lookup"><span data-stu-id="9e4c4-227">Port range end</span></span>|<span data-ttu-id="9e4c4-228">Valeur DSCP</span><span class="sxs-lookup"><span data-stu-id="9e4c4-228">DSCP value</span></span>|
|---------|---------|---------|--------|
| <span data-ttu-id="9e4c4-229">Audio</span><span class="sxs-lookup"><span data-stu-id="9e4c4-229">Audio</span></span>|<span data-ttu-id="9e4c4-230">50000</span><span class="sxs-lookup"><span data-stu-id="9e4c4-230">50000</span></span>|<span data-ttu-id="9e4c4-231">50019</span><span class="sxs-lookup"><span data-stu-id="9e4c4-231">50019</span></span>|<span data-ttu-id="9e4c4-232">46</span><span class="sxs-lookup"><span data-stu-id="9e4c4-232">46</span></span>|
| <span data-ttu-id="9e4c4-233">Vidéo</span><span class="sxs-lookup"><span data-stu-id="9e4c4-233">Video</span></span>|<span data-ttu-id="9e4c4-234">50020</span><span class="sxs-lookup"><span data-stu-id="9e4c4-234">50020</span></span>|<span data-ttu-id="9e4c4-235">50039</span><span class="sxs-lookup"><span data-stu-id="9e4c4-235">50039</span></span>|<span data-ttu-id="9e4c4-236">34</span><span class="sxs-lookup"><span data-stu-id="9e4c4-236">3-4</span></span>|
| <span data-ttu-id="9e4c4-237">Partage d'application</span><span class="sxs-lookup"><span data-stu-id="9e4c4-237">Application sharing</span></span>|<span data-ttu-id="9e4c4-238">50040</span><span class="sxs-lookup"><span data-stu-id="9e4c4-238">50040</span></span>|<span data-ttu-id="9e4c4-239">50059</span><span class="sxs-lookup"><span data-stu-id="9e4c4-239">50059</span></span>|<span data-ttu-id="9e4c4-240">18</span><span class="sxs-lookup"><span data-stu-id="9e4c4-240">18</span></span>|
| <span data-ttu-id="9e4c4-241">Transfert de fichiers</span><span class="sxs-lookup"><span data-stu-id="9e4c4-241">File transfer</span></span>|<span data-ttu-id="9e4c4-242">50040</span><span class="sxs-lookup"><span data-stu-id="9e4c4-242">50040</span></span>|<span data-ttu-id="9e4c4-243">50059</span><span class="sxs-lookup"><span data-stu-id="9e4c4-243">50059</span></span>|<span data-ttu-id="9e4c4-244">18</span><span class="sxs-lookup"><span data-stu-id="9e4c4-244">18</span></span>|

<span data-ttu-id="9e4c4-245">Tableau 3 : plages de ports par type de trafic</span><span class="sxs-lookup"><span data-stu-id="9e4c4-245">Table 3: Port ranges by traffic type</span></span>

<span data-ttu-id="9e4c4-246">Remarque : les plages de ports définies par Teams ne peuvent pas être modifiées ni altérées.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-246">Note: The port ranges set by Teams cannot be changed or altered.</span></span> <span data-ttu-id="9e4c4-247">Pour les informations les plus récentes, consultez la page suivante : https://support.microsoft.com/ kb/2409256</span><span class="sxs-lookup"><span data-stu-id="9e4c4-247">Please review this page for the latest information: https://support.microsoft.com/ kb/2409256</span></span>

<span data-ttu-id="9e4c4-248">Une fois les plages de ports déterminées, l’étape suivante consiste à configurer les paramètres QoS en fonction de la stratégie au sein d'un objet de stratégie de groupe (GPO).</span><span class="sxs-lookup"><span data-stu-id="9e4c4-248">Once the port ranges have been determined, the next step is to configure the policy-based QoS settings within a Group Policy Object (GPO).</span></span> <span data-ttu-id="9e4c4-249">Vous trouverez des informations détaillées pour cette procédure sur [TechNet](https://technet.microsoft.com/library/jj205371(v=ocs.15).aspx).</span><span class="sxs-lookup"><span data-stu-id="9e4c4-249">Details for these steps can be found on [TechNet](https://technet.microsoft.com/library/jj205371(v=ocs.15).aspx).</span></span> 

<span data-ttu-id="9e4c4-250">Les nouvelles stratégies que vous avez créées ne seront appliquées que lorsque la stratégie de groupe aura été actualisée sur les ordinateurs clients.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-250">The new policies you have created won’t take effect until Group Policy has been refreshed on your client computers.</span></span> <span data-ttu-id="9e4c4-251">La stratégie de groupe s’actualise elle-même régulièrement, mais vous pouvez forcer une actualisation immédiate en exécutant la commande suivante sur chaque ordinateur sur lequel elle doit être actualisée :</span><span class="sxs-lookup"><span data-stu-id="9e4c4-251">Although Group Policy periodically refreshes on its own, you can force an immediate refresh by running the following command on each computer where Group Policy needs to be refreshed:</span></span>

        gpudate.exe /force

<span data-ttu-id="9e4c4-252">Cette commande peut être actualisée depuis n’importe quelle fenêtre de commande exécutée avec des informations d’identification d’administrateur.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-252">This command can be run from any command window that is running under administrator credentials.</span></span> <span data-ttu-id="9e4c4-253">Pour exécuter une fenêtre de commande, cliquez sur **Démarrer**, cliquez avec le bouton droit sur **Invite de commandes**, puis cliquez sur **Exécuter en tant qu’administrateur**.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-253">To open a command window, click **Start**, right-click **Command Prompt**, and then click **Run as administrator**.</span></span>

## <a name="verifying-the-dscp-markings-in-gpo"></a><span data-ttu-id="9e4c4-254">Vérification des marquages DSCP dans l’objet de stratégie de groupe</span><span class="sxs-lookup"><span data-stu-id="9e4c4-254">Verifying the DSCP markings in GPO</span></span>

<span data-ttu-id="9e4c4-255">Pour vérifier que les valeurs de l’objet de la stratégie de groupe ont été définies, suivez la procédure suivante :</span><span class="sxs-lookup"><span data-stu-id="9e4c4-255">To verify that the values from the GPO has been set, please perform the following steps:</span></span>

1.  <span data-ttu-id="9e4c4-256">Utilisez la commande gpresult pour vérifier que les paramètres de l’objet de stratégie de groupe ont été reçus par l’ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-256">Use gpresult to verify that the settings from the GPO has been received by the local PC.</span></span> <span data-ttu-id="9e4c4-257">La commande gpresult /R >gp.txt générera un rapport et l’enverra dans un fichier texte, gp.txt.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-257">gpresult /R >gp.txt will generate a report and send it to a text file, gp.txt.</span></span>

    ![Capture d’écran de l’invite de commande Administrateur exécutant la commande gpresult.](media/Qos-in-Teams-Image3.png)

    <span data-ttu-id="9e4c4-259">Figure 2 : objets de stratégie de groupe appliqués</span><span class="sxs-lookup"><span data-stu-id="9e4c4-259">Figure 2: Verify Applied Group Policy Objects</span></span>
    > [!NOTE]
    > <span data-ttu-id="9e4c4-260">Vous pouvez également exécuter la commande gpresult /H gp.html pour produire les mêmes données dans un rapport HTML plus convivial.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-260">Alternatively, you can run gpresult /H gp.html to produce the same data in more user-friendly HTML report.</span></span> 
2.  <span data-ttu-id="9e4c4-261">Dans le fichier généré, recherchez l’en-tête Applied Group Policy Objects et vérifiez que les noms des objets de stratégie de groupe créés précédemment se trouvent dans la liste des stratégies appliquées.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-261">In the generated file look for the heading: Applied Group Policy Objects and verify that the names of the GPO’s created earlier is in the list of applied policies.</span></span> 

3.  <span data-ttu-id="9e4c4-262">Ouvrez l’éditeur du Registre est accédez à</span><span class="sxs-lookup"><span data-stu-id="9e4c4-262">Open the registry editor and navigate to:</span></span>

    <span data-ttu-id="9e4c4-263">HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\QoS\\</span><span class="sxs-lookup"><span data-stu-id="9e4c4-263">HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\QoS\\</span></span>

    <span data-ttu-id="9e4c4-264">Vérifiez les valeurs du registre répertoriées dans le tableau 3.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-264">Verify the registry values listed in Table 3 below.</span></span>
    
    | <span data-ttu-id="9e4c4-265">Nom</span><span class="sxs-lookup"><span data-stu-id="9e4c4-265">Name</span></span> | <span data-ttu-id="9e4c4-266">Type</span><span class="sxs-lookup"><span data-stu-id="9e4c4-266">Type</span></span> | <span data-ttu-id="9e4c4-267">Données</span><span class="sxs-lookup"><span data-stu-id="9e4c4-267">Data</span></span>|
    |---------|---------|---------
    | <span data-ttu-id="9e4c4-268">Nom de l’application</span><span class="sxs-lookup"><span data-stu-id="9e4c4-268">Application Name</span></span>|<span data-ttu-id="9e4c4-269">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9e4c4-269">REG_SZ</span></span>|<span data-ttu-id="9e4c4-270">Teams.exe</span><span class="sxs-lookup"><span data-stu-id="9e4c4-270">Teams.exe</span></span>|
    | <span data-ttu-id="9e4c4-271">Valeur DSCP</span><span class="sxs-lookup"><span data-stu-id="9e4c4-271">DSCP Value</span></span>|<span data-ttu-id="9e4c4-272">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9e4c4-272">REG_SZ</span></span>|<span data-ttu-id="9e4c4-273">46</span><span class="sxs-lookup"><span data-stu-id="9e4c4-273">46</span></span>|
    | <span data-ttu-id="9e4c4-274">Adresse IP locale</span><span class="sxs-lookup"><span data-stu-id="9e4c4-274">Second Reflexive Local IP</span></span>|<span data-ttu-id="9e4c4-275">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9e4c4-275">REG_SZ</span></span>|*|
    | <span data-ttu-id="9e4c4-276">Longueur du préfixe de l’adresse IP locale</span><span class="sxs-lookup"><span data-stu-id="9e4c4-276">Local IP Prefix Length</span></span>|<span data-ttu-id="9e4c4-277">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9e4c4-277">REG_SZ</span></span>|*|
    | <span data-ttu-id="9e4c4-278">Port local</span><span class="sxs-lookup"><span data-stu-id="9e4c4-278">Local Port</span></span>|<span data-ttu-id="9e4c4-279">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9e4c4-279">REG_SZ</span></span>|<span data-ttu-id="9e4c4-280">50000-50019</span><span class="sxs-lookup"><span data-stu-id="9e4c4-280">50000-50019</span></span>|
    | <span data-ttu-id="9e4c4-281">Protocole</span><span class="sxs-lookup"><span data-stu-id="9e4c4-281">Protocol</span></span>|<span data-ttu-id="9e4c4-282">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9e4c4-282">REG_SZ</span></span>|*|
    | <span data-ttu-id="9e4c4-283">Adresse IP distante</span><span class="sxs-lookup"><span data-stu-id="9e4c4-283">Remote IP</span></span>|<span data-ttu-id="9e4c4-284">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9e4c4-284">REG_SZ</span></span>|*|
    | <span data-ttu-id="9e4c4-285">Préfixe de l’adresse IP distante</span><span class="sxs-lookup"><span data-stu-id="9e4c4-285">Remote Ip Prefix</span></span>|<span data-ttu-id="9e4c4-286">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9e4c4-286">REG_SZ</span></span>|*|
    | <span data-ttu-id="9e4c4-287">Port distant</span><span class="sxs-lookup"><span data-stu-id="9e4c4-287">Remote Port</span></span>|<span data-ttu-id="9e4c4-288">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9e4c4-288">REG_SZ</span></span>|*|
    | <span data-ttu-id="9e4c4-289">Taux d’accélération</span><span class="sxs-lookup"><span data-stu-id="9e4c4-289">Throttle Rate</span></span>|<span data-ttu-id="9e4c4-290">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9e4c4-290">REG_SZ</span></span>|<span data-ttu-id="9e4c4-291">-1</span><span class="sxs-lookup"><span data-stu-id="9e4c4-291">$1</span></span>|
    
    <span data-ttu-id="9e4c4-292">Tableau 3 : valeurs du registre Windows pour la qualité de service</span><span class="sxs-lookup"><span data-stu-id="9e4c4-292">Table 3: Windows registry values for QoS</span></span>

4.  <span data-ttu-id="9e4c4-293">Vérifiez que le nom de l’application est correct pour le client que vous utilisez, et que la valeur DSCP et le port local renvoient les paramètres dans l’objet de stratégie de groupe.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-293">Verify that the Application Name is correct for the client you are using, and verify that both DSCP value and Local Port reflect the settings in the GPO.</span></span>

## <a name="validating-qos-analyzing-teams-traffic-on-the-network"></a><span data-ttu-id="9e4c4-294">Validation de la qualité de service : analyse du trafic Teams sur le réseau</span><span class="sxs-lookup"><span data-stu-id="9e4c4-294">Validating QoS: Analyzing Teams traffic on the network</span></span>

<span data-ttu-id="9e4c4-295">Pour que la qualité de service soit appliquée, la valeur DSCP définie par l’objet de stratégie de groupe doit être présente de l’appelant à l’appelé.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-295">The DSCP value set by the GPO needs to be present from caller to callee in order for QoS to be affective.</span></span> <span data-ttu-id="9e4c4-296">En regardant le trafic généré par le client Teams, nous pouvons vérifier que la valeur DSCP n'est pas modifiée ni supprimée lors du parcours du réseau.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-296">By looking at the traffic generated by the Teams client we can verify that the DSCP is not changed or stripped out when traversing the network.</span></span> 

<span data-ttu-id="9e4c4-297">De préférence, nous capturerions le trafic au point de sortie du réseau.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-297">Preferably we would capture traffic at the network egress point.</span></span> <span data-ttu-id="9e4c4-298">La mise en miroir des ports peut être utilisée sur un commutateur ou routeur pour aider à la capture du trafic sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-298">Port mirroring can be used on a switch or router to aid in capturing traffic on the network.</span></span> 

### <a name="looking-at-network-traffic-using-network-monitor"></a><span data-ttu-id="9e4c4-299">Vérification du trafic réseau à l’aide du Moniteur réseau</span><span class="sxs-lookup"><span data-stu-id="9e4c4-299">Looking at network traffic using Network Monitor</span></span>

<span data-ttu-id="9e4c4-300">Le Moniteur réseau est un outil que vous pouvez télécharger sur le site Microsoft pour analyser le trafic réseau.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-300">Network Monitor is a tool you can download from Microsoft to analyze network traffic.</span></span> <span data-ttu-id="9e4c4-301">Téléchargez [Moniteur réseau 3.4](https://www.microsoft.com/download/4865).</span><span class="sxs-lookup"><span data-stu-id="9e4c4-301">Download [Network Monitor 3.4](https://www.microsoft.com/download/4865).</span></span>

<span data-ttu-id="9e4c4-302">Connectez l’ordinateur qui exécute le moniteur réseau au port qui a été configuré pour la mise en miroir des ports, et commencez à capturer les paquets.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-302">Connect to PC running network monitor to the port that has been configured for port mirroring and start capturing packets.</span></span> <span data-ttu-id="9e4c4-303">Passez un appel à l’aide du client Skype Entreprise.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-303">Make a call using the Skype for Business client.</span></span> <span data-ttu-id="9e4c4-304">Assurez-vous que la connexion multimédia est établie avant de raccrocher.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-304">Make sure media is established before hanging up the call.</span></span> <span data-ttu-id="9e4c4-305">Arrêtez la capture pour créer un filtre d’affichage qui correspond à l’adresse IP source de l’ordinateur qui a passé l’appel, et affinez le filtre en définissant la valeur DSCP 46 (0xb8 en valeur hexadécimale) comme critère de recherche :</span><span class="sxs-lookup"><span data-stu-id="9e4c4-305">Stop the capture create a Display Filter that matches the source IP of the PC that made the call and refine the filter by defining DSCP value 46 (hex 0xb8) as search criteria:</span></span>

<span data-ttu-id="9e4c4-306">Source == "192.168.137.201" AND IPv4.DifferentiatedServicesField == 0xb8</span><span class="sxs-lookup"><span data-stu-id="9e4c4-306">Source == "192.168.137.201" AND IPv4.DifferentiatedServicesField == 0xb8</span></span> 

![Capture d’écran de la boîte de dialogue du filtre d’affichage dans Moniteur réseau, présentant les filtres à appliquer.](media/Qos-in-Teams-Image4.png)


<span data-ttu-id="9e4c4-308">Cliquez sur **Appliquer** pour activer le filtre.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-308">Click **Apply** to activate the filter.</span></span> <span data-ttu-id="9e4c4-309">Dans la fenêtre **Résumé de la trame**, sélectionnez le premier paquet UDP et vérifiez les détails de la trame :</span><span class="sxs-lookup"><span data-stu-id="9e4c4-309">In the **Frame Summary** window, select the first UDP packet and look at the Frame Details:</span></span>

![Capture d’écran de la boîte de dialogue des détails de la trame dans Moniteur réseau, mettant en relief les paramètres DSCP.](media/Qos-in-Teams-Image5.png)

<span data-ttu-id="9e4c4-311">Développez IPv4 et vérifiez la valeur à la fin de la ligne DSCP.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-311">Expand IPv4 and look at the value at the end of the DSCP line.</span></span> <span data-ttu-id="9e4c4-312">Dans cet exemple, nous voyons que la valeur DSCP est définie sur 46, ce qui est correct car le port source utilisé est 50019, ce qui nous indique que la charge de travail est la voix.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-312">In this example we see that the DSCP value is set to 46 which is correct since the source port used is 50019 which tells us that the workload is voice.</span></span> 

<span data-ttu-id="9e4c4-313">Répétez cette vérification pour chaque charge de travail qui a été marquée par l’objet de stratégie de groupe.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-313">Repeat the verification for each workload that has been marked by the GPO.</span></span> 

> [!NOTE]
> <span data-ttu-id="9e4c4-314">Vérifiez que les marquages sont respectés également pour le trafic réseau pair à pair.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-314">Verify that markings are honored for peer-to-peer traffic as well.</span></span> <span data-ttu-id="9e4c4-315">Pour ce faire, vous pouvez installer Moniteur réseau sur deux clients et passer des appels entre eux.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-315">This can be done by installing Network Monitor on two clients and placing calls between the two clients.</span></span> <span data-ttu-id="9e4c4-316">Vérifiez le trafic multimédia passant entre les clients de la même manière que ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-316">Look at the media traffic flowing between clients in the same manner as described above.</span></span>

### <a name="sample-filters-to-use-for-network-monitor-or-wireshark"></a><span data-ttu-id="9e4c4-317">Modèles de filtres à utiliser pour Moniteur réseau ou Wireshark</span><span class="sxs-lookup"><span data-stu-id="9e4c4-317">Sample filters to use for Network Monitor or Wireshark</span></span>

|<span data-ttu-id="9e4c4-318">Utilisation</span><span class="sxs-lookup"><span data-stu-id="9e4c4-318">Usage</span></span>  |<span data-ttu-id="9e4c4-319">Modèle de filtre</span><span class="sxs-lookup"><span data-stu-id="9e4c4-319">Sample filter</span></span>  |
|---------|---------|
|<span data-ttu-id="9e4c4-320">Voix (remarque : le multiplexage doit être désactivé)</span><span class="sxs-lookup"><span data-stu-id="9e4c4-320">Voice (note: muxing must be turned off)</span></span>     |   <span data-ttu-id="9e4c4-321">udp.port==3479 AND Ipv4.DifferentiatedServicesField.DSCP==46</span><span class="sxs-lookup"><span data-stu-id="9e4c4-321">udp.port==3479 AND Ipv4.DifferentiatedServicesField.DSCP==46</span></span>      |
|<span data-ttu-id="9e4c4-322">Vidéo</span><span class="sxs-lookup"><span data-stu-id="9e4c4-322">Video</span></span>     | <span data-ttu-id="9e4c4-323">udp.port==3480 AND Ipv4.DifferentiatedServicesField.DSCP==34</span><span class="sxs-lookup"><span data-stu-id="9e4c4-323">udp.port==3480 AND Ipv4.DifferentiatedServicesField.DSCP==34</span></span>        |
|<span data-ttu-id="9e4c4-324">Partage d’écran</span><span class="sxs-lookup"><span data-stu-id="9e4c4-324">Screen sharing</span></span>     |  <span data-ttu-id="9e4c4-325">udp.port==3481 AND Ipv4.DifferentiatedServicesField.DSCP==18</span><span class="sxs-lookup"><span data-stu-id="9e4c4-325">udp.port==3481 AND Ipv4.DifferentiatedServicesField.DSCP==18</span></span>       |

### <a name="filter-media-traffic-from-microsoft-relays-requires-azure-expressroutehttpsazuremicrosoftcomservicesexpressroute"></a><span data-ttu-id="9e4c4-326">Filtre : trafic multimédia depuis les relais Microsoft (nécessite [Azure ExpressRoute](https://azure.microsoft.com/services/expressroute/))</span><span class="sxs-lookup"><span data-stu-id="9e4c4-326">Filter: Media traffic from Microsoft relays (requires [Azure ExpressRoute](https://azure.microsoft.com/services/expressroute/))</span></span>

<span data-ttu-id="9e4c4-327">ip.src in {52.114.188.0/22 52.114.220.0/22 52.114.124.0/22 52.114.60.0/22} and (udp.srcport in {3479 3480 3481} or (udp.srcport ge 50000 and udp.srcport lt 60000))</span><span class="sxs-lookup"><span data-stu-id="9e4c4-327">ip.src in {52.114.188.0/22 52.114.220.0/22 52.114.124.0/22 52.114.60.0/22} and (udp.srcport in {3479 3480 3481} or (udp.srcport ge 50000 and udp.srcport lt 60000))</span></span>

### <a name="filter-media-traffic-to-microsoft-relays"></a><span data-ttu-id="9e4c4-328">Filtre : trafic multimédia depuis les relais Microsoft</span><span class="sxs-lookup"><span data-stu-id="9e4c4-328">Filter: Media traffic to Microsoft relays</span></span>

<span data-ttu-id="9e4c4-329">ip.dst in {52.114.188.0/22 52.114.220.0/22 52.114.124.0/22 52.114.60.0/22} and (udp.dstport in {3479 3480 3481} or (udp.dstport ge 50000 and udp.dstport lt 60000))</span><span class="sxs-lookup"><span data-stu-id="9e4c4-329">ip.dst in {52.114.188.0/22 52.114.220.0/22 52.114.124.0/22 52.114.60.0/22} and (udp.dstport in {3479 3480 3481} or (udp.dstport ge 50000 and udp.dstport lt 60000))</span></span>


<span data-ttu-id="9e4c4-330">Vous devez voir le trafic depuis et vers les relais Microsoft.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-330">You should see traffic to and from the Microsoft relays.</span></span> <span data-ttu-id="9e4c4-331">Vous pouvez vérifier les marquages DSCP sur la couche IP dans Wireshark, comme indiqué dans la section suivante.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-331">You can check DSCP markings on the IP layer in Wireshark, as shown in the next section.</span></span>

### <a name="expected-dscp-markings"></a><span data-ttu-id="9e4c4-332">Marquages DSCP attendus</span><span class="sxs-lookup"><span data-stu-id="9e4c4-332">Expected DSCP markings</span></span>

<span data-ttu-id="9e4c4-333">Flux audio : 46</span><span class="sxs-lookup"><span data-stu-id="9e4c4-333">Audio streams: 46</span></span>

<span data-ttu-id="9e4c4-334">Flux vidéo : 34</span><span class="sxs-lookup"><span data-stu-id="9e4c4-334">Video streams: 34</span></span>

<span data-ttu-id="9e4c4-335">Flux de données : 18</span><span class="sxs-lookup"><span data-stu-id="9e4c4-335">Data streams: 18</span></span>

### <a name="filter-dscp-condition-to-network"></a><span data-ttu-id="9e4c4-336">Filtre : condition DSCP vers le réseau</span><span class="sxs-lookup"><span data-stu-id="9e4c4-336">Filter: DSCP condition to network</span></span>

<span data-ttu-id="9e4c4-337">ip.dsfield.dscp in {46 34 18}</span><span class="sxs-lookup"><span data-stu-id="9e4c4-337">ip.dsfield.dscp in {46 34 18}</span></span>



### <a name="looking-at-network-traffic-using-wireshark"></a><span data-ttu-id="9e4c4-338">Vérification du trafic réseau à l’aide de Wireshark</span><span class="sxs-lookup"><span data-stu-id="9e4c4-338">Looking at network traffic using Wireshark</span></span>

<span data-ttu-id="9e4c4-339">Wireshark (https://www.wireshark.org/), est un outil puissant permettant de filtrer et d’enregistrer les données du réseau pour une analyse plus approfondie.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-339">Wireshark, https://www.wireshark.org/, is a powerful tool that allows us to filter and record network data for further analysis.</span></span> <span data-ttu-id="9e4c4-340">Connectez un ordinateur qui exécute Wireshark au port qui a été configuré pour la mise en miroir des ports, et commencez à capturer les paquets.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-340">Connect a PC running Wireshark to the port that has been configured for port mirroring and start capturing packets.</span></span> <span data-ttu-id="9e4c4-341">Passez un appel à l’aide du client Teams.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-341">Make a call using the Teams client.</span></span> <span data-ttu-id="9e4c4-342">Assurez-vous que la connexion multimédia est établie avant de raccrocher.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-342">Make sure media is established before hanging up the call.</span></span>

<span data-ttu-id="9e4c4-343">Arrêtez le traçage des paquets et créez un filtre qui affiche uniquement l’adresse IP source de l’ordinateur sur lequel le client Teams est installé, par exemple *ip.src_host == 192.168.137.201*, et vérifiez les paquets qui utilisent un port source de la plage spécifiée pour la voix, 50 000 – 50 019 :</span><span class="sxs-lookup"><span data-stu-id="9e4c4-343">Stop the packet trace and create a filter that only displays the source IP of the PC where the Teams client is installed, for example, *ip.src_host == 192.168.137.201* and looks for packages that use a source port from the range specified for voice, 50,000 – 50,019:</span></span>

![Capture d’écran de Wireshark avec les paramètres de filtre.](media/Qos-in-Teams-Image6.png)
 

<span data-ttu-id="9e4c4-345">Marquez le package et développez l’en-tête de la version du protocole Internet 4 (IPV4) dans le volet des détails du paquet :</span><span class="sxs-lookup"><span data-stu-id="9e4c4-345">Mark the package and expand the Internet Protocol Version 4 (IPV4) header in the packet detail pane:</span></span>

![Capture d’écran de Wireshark avec les paramètres Differentiated Services Codepoint mis en relief.](media/Qos-in-Teams-Image7.png)
 

<span data-ttu-id="9e4c4-347">Vérifiez que la valeur pour *Differentiated Services Codepoint* correspond à celle de la charge de travail spécifique, dans ce cas 46 (101110 en binaire) pour la voix.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-347">Verify that the value for *Differentiated Services Codepoint* match the value for the specific workload, in this case 46 (binary 101110) for voice.</span></span>

<span data-ttu-id="9e4c4-348">Répétez cette vérification pour chaque charge de travail qui a été marquée par l’objet de stratégie de groupe.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-348">Repeat the verification for each workload that has been marked by the GPO.</span></span>

> [!NOTE]
> <span data-ttu-id="9e4c4-349">Vérifiez que les marquages sont respectés pour le trafic réseau pair à pair.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-349">Verify that markings are honored for peer-to-peer traffic.</span></span> <span data-ttu-id="9e4c4-350">Pour ce faire, vous pouvez installer WireShark ou Moniteur réseau sur deux clients et passer des appels entre eux.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-350">This can be done by installing WireShark or Network Monitor on two clients and placing calls between the two clients.</span></span> <span data-ttu-id="9e4c4-351">Vérifiez le trafic multimédia passant entre les clients de la même manière que ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-351">Look at the media traffic flowing between clients in the same manner as described above.</span></span>

## <a name="summary"></a><span data-ttu-id="9e4c4-352">Résumé</span><span class="sxs-lookup"><span data-stu-id="9e4c4-352">Summary</span></span>

<span data-ttu-id="9e4c4-353">La qualité de service est un élément essentiel important pour fournir des expériences de niveau professionnel avec Teams.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-353">Quality of Service is an important piece of the puzzle when providing business-class experiences with Teams.</span></span> <span data-ttu-id="9e4c4-354">Cependant, il est important de ne jamais oublier qu’elle n’est efficace que sur des réseaux gérés correctement.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-354">However, it is important to always remember that QoS is only effective on properly managed networks.</span></span> <span data-ttu-id="9e4c4-355">À cet effet, l’équipe en charge du déploiement doit travailler en étroite collaboration avec l’équipe chargée de la mise en réseau pour garantir que les informations correctes sont transmises à la couche réseau, gérée dans l’idéal de bout en bout.</span><span class="sxs-lookup"><span data-stu-id="9e4c4-355">As such, the deployment team must work very closely with the networking teams to ensure the proper information is passed at the network layer, ideally managed from end-to-end.</span></span>

