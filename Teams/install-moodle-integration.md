---
title: Intégration de Moodle à Microsoft Teams
author: MicrosoftHeidi
ms.author: heidip
manager: serdars
ms.topic: article
ms.service: msteams
audience: admin
ms.reviewer: ''
search.appverid: MET150
description: Découvrez comment installer et configurer l’application LMS (Open Source Learning Management System) Moodle pour les Microsoft Teams.
keywords: Teams Plug-in d’intégration de l’application Moodle
localization_priority: Normal
f1.keywords:
- NOCSH
ms.collection:
- M365-collaboration
ms.custom:
- seo-marvel-apr2020
- seo-marvel-mar2020
appliesto:
- Microsoft Teams
ms.openlocfilehash: 3d547d3c811f499faee5727634068a7807566293
ms.sourcegitcommit: a731226d62d8b23fe73bd7bf61654e16367fbd90
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/22/2021
ms.locfileid: "51948710"
---
# <a name="installing-the-moodle-integration-with-microsoft-teams"></a><span data-ttu-id="14085-104">Installation de l’intégration de Moodle à Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="14085-104">Installing the Moodle integration with Microsoft Teams</span></span>

> [!VIDEO https://www.youtube.com/embed/OHlPt22nKoE]

<span data-ttu-id="14085-105">[Moodle,](https://moodle.org/)le système de gestion des apprentissages open source et le plus populaire au monde, est désormais intégré à Microsoft Teams !</span><span class="sxs-lookup"><span data-stu-id="14085-105">[Moodle](https://moodle.org/), the most popular and open-source Learning Management System (LMS) in the world, is now integrated with Microsoft Teams!</span></span> <span data-ttu-id="14085-106">Cette intégration permet aux enseignants et aux enseignants de collaborer autour de cours Moodle, de poser des questions sur leurs notes et devoirs et de rester à jour avec des notifications, directement dans Teams !</span><span class="sxs-lookup"><span data-stu-id="14085-106">This integration helps educators and teachers collaborate around Moodle courses, ask questions about their grades and assignments and stay updated with notifications -- right within Teams!</span></span>

<span data-ttu-id="14085-107">Pour aider les administrateurs informatiques à configurer facilement cette intégration, nous avons mis à jour notre plug-in Moodle open source avec les fonctionnalités suivantes :</span><span class="sxs-lookup"><span data-stu-id="14085-107">To help IT admins easily set this integration up, we have updated our open-source Moodle Plugin with the following capabilities:</span></span>

* <span data-ttu-id="14085-108">Enregistrement automatique de votre serveur Moodle auprès d’Azure AD.</span><span class="sxs-lookup"><span data-stu-id="14085-108">Auto-registration of your Moodle server with Azure AD.</span></span>
* <span data-ttu-id="14085-109">Déploiement en un clic de votre bot Assistant Moodle dans Azure.</span><span class="sxs-lookup"><span data-stu-id="14085-109">One-click deployment of your Moodle Assistant bot to Azure.</span></span>
* <span data-ttu-id="14085-110">Mise en service automatique des équipes et synchronisation automatique des inscriptions aux équipes pour toutes ou sélectionner des cours Moodle.</span><span class="sxs-lookup"><span data-stu-id="14085-110">Auto-provisioning of teams and auto-synchronization of team enrollments for all or select Moodle courses.</span></span>
* <span data-ttu-id="14085-111">Installation automatique de l’onglet Moodle et du robot Assistant Moodle dans chaque équipe synchronisée.</span><span class="sxs-lookup"><span data-stu-id="14085-111">Auto-installation of the Moodle tab and the Moodle Assistant bot into each synchronized team.</span></span> <span data-ttu-id="14085-112">(bientôt disponible)</span><span class="sxs-lookup"><span data-stu-id="14085-112">(Coming soon)</span></span>
* <span data-ttu-id="14085-113">Publication en un clic de l’application Moodle dans votre magasin Teams App Store.</span><span class="sxs-lookup"><span data-stu-id="14085-113">One-click publishing of the Moodle app into your private Teams App Store.</span></span> <span data-ttu-id="14085-114">(bientôt disponible)</span><span class="sxs-lookup"><span data-stu-id="14085-114">(Coming soon)</span></span>

<span data-ttu-id="14085-115">Pour en savoir plus sur les fonctionnalités de cette intégration, voir Installation de l’intégration [Moodle avec Microsoft Teams.](/microsoftteams/platform/resources/moodleinstructions)</span><span class="sxs-lookup"><span data-stu-id="14085-115">To learn more about the functionality this integration provides, see [Installing the Moodle integration with Microsoft Teams](/microsoftteams/platform/resources/moodleinstructions).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="14085-116">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="14085-116">Prerequisites</span></span>

<span data-ttu-id="14085-117">Pour installer et configurer cette application, vous devez :</span><span class="sxs-lookup"><span data-stu-id="14085-117">In order to install and configure this application you'll need:</span></span>

1. <span data-ttu-id="14085-118">Informations d’identification de l’administrateur Moodle</span><span class="sxs-lookup"><span data-stu-id="14085-118">Moodle administrator credentials</span></span>
2. <span data-ttu-id="14085-119">Informations d’identification de l’administrateur Azure AD</span><span class="sxs-lookup"><span data-stu-id="14085-119">Azure AD administrator credentials</span></span>
3. <span data-ttu-id="14085-120">Un abonnement Azure dans</span><span class="sxs-lookup"><span data-stu-id="14085-120">An Azure subscription you can create new resources in</span></span>

## <a name="step-1-install-the-moodle-plugin"></a><span data-ttu-id="14085-121">Étape 1 : installer le plug-in Moodle</span><span class="sxs-lookup"><span data-stu-id="14085-121">Step 1: Install the Moodle Plugin</span></span>

> [!VIDEO https://www.youtube.com/embed/SETEC5nzMgk]

<span data-ttu-id="14085-122">L’intégration de Moodle Microsoft Teams est optimisée par le plug-in open source [Moodle.](https://github.com/Microsoft/o365-moodle)</span><span class="sxs-lookup"><span data-stu-id="14085-122">The Moodle integration in Microsoft Teams is powered by the open source [Moodle plugin set](https://github.com/Microsoft/o365-moodle).</span></span> <span data-ttu-id="14085-123">Pour installer le plug-in sur votre serveur Moodle :</span><span class="sxs-lookup"><span data-stu-id="14085-123">To install the plugin in your Moodle server:</span></span>

1. <span data-ttu-id="14085-124">Tout d’abord, [téléchargez le plug-in Moodle et](https://moodle.org/plugins/pluginversions.php?plugin=local_o365) enregistrez-le sur votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="14085-124">First, download the [Moodle plugin set](https://moodle.org/plugins/pluginversions.php?plugin=local_o365) and save it to your local computer.</span></span> <span data-ttu-id="14085-125">Vous devez utiliser la version 3.5 ou une version plus récente.</span><span class="sxs-lookup"><span data-stu-id="14085-125">You'll need to use version 3.5 or newer.</span></span>
    * <span data-ttu-id="14085-126">L’installation du local_o365 plug-in installera également les [plug-ins auth_oidc](https://moodle.org/plugins/auth_oidc) et [boost_o365Teams’équipe.](https://moodle.org/plugins/pluginversions.php?plugin=theme_boost_o365teams)</span><span class="sxs-lookup"><span data-stu-id="14085-126">Installing the local_o365 plugin will also install the [auth_oidc](https://moodle.org/plugins/auth_oidc) and [boost_o365Teams](https://moodle.org/plugins/pluginversions.php?plugin=theme_boost_o365teams) plugins.</span></span>
1. <span data-ttu-id="14085-127">Connectez-vous à votre serveur Moodle en tant qu’administrateur, puis sélectionnez Administration du **site** dans le panneau de navigation gauche.</span><span class="sxs-lookup"><span data-stu-id="14085-127">Sign in to your Moodle server as an administrator, and select **Site administration** from the left navigation panel.</span></span>
1. <span data-ttu-id="14085-128">Sélectionnez **l’onglet Plug-ins,** puis cliquez sur **Installer les plug-ins.**</span><span class="sxs-lookup"><span data-stu-id="14085-128">Select the **Plugins** tab, and then click **Install plugins**.</span></span>
1. <span data-ttu-id="14085-129">Sous le **plug-in d’installation de** la section Fichier ZIP, cliquez sur **le bouton Choisir un** fichier.</span><span class="sxs-lookup"><span data-stu-id="14085-129">Under the **Install plugin from ZIP file** section click the **Choose a file** button.</span></span>
1. <span data-ttu-id="14085-130">Sélectionnez **l Télécharger option d’un** fichier dans le navigation gauche, recherchez le fichier que vous avez téléchargé ci-dessus, puis **cliquez Télécharger ce fichier.**</span><span class="sxs-lookup"><span data-stu-id="14085-130">Select the **Upload a file** option from the left navigation, browse for the file you downloaded above and click **Upload this file**.</span></span>
1. <span data-ttu-id="14085-131">Sélectionnez de **nouveau l’option Administration** du site dans le panneau de navigation gauche pour revenir à votre tableau de bord d’administration.</span><span class="sxs-lookup"><span data-stu-id="14085-131">Select the **Site administration** option from the left navigation panel again to return to your admin dashboard.</span></span> <span data-ttu-id="14085-132">Faites défiler vers le bas **jusqu’aux plug-ins locaux,** puis cliquez **sur Microsoft Office 365 lien Intégration** rapide.</span><span class="sxs-lookup"><span data-stu-id="14085-132">Scroll down to the **Local plugins** and click the **Microsoft Office 365 Integration** link.</span></span> <span data-ttu-id="14085-133">Gardez cette page de configuration ouverte dans un onglet de navigateur distinct, tel que vous l’utiliserez tout au long du processus.</span><span class="sxs-lookup"><span data-stu-id="14085-133">Keep this configuration page open in a separate browser tab as you'll be using it throughout the rest of this process.</span></span>

<span data-ttu-id="14085-134">Pour plus d’informations sur l’installation des plug-ins Moodle, voir la [documentation de Moodle.](https://docs.moodle.org/34/en/Installing_plugins)</span><span class="sxs-lookup"><span data-stu-id="14085-134">You can find more information on how to install Moodle plugins in the [Moodle documentation](https://docs.moodle.org/34/en/Installing_plugins).</span></span>

<span data-ttu-id="14085-135">**Remarque importante :** Gardez votre page Microsoft 365 ou Office 365 configuration du plug-in Moodle ouverte dans un onglet de navigateur distinct, car vous revenirez à cet ensemble de pages tout au long de ce processus.</span><span class="sxs-lookup"><span data-stu-id="14085-135">**Important Note:** Keep your Microsoft 365 or Office 365 Moodle Plugin configuration page open in a separate browser tab as you will be returning to this set of pages throughout this process.</span></span>

<span data-ttu-id="14085-136">*Vous n’avez pas encore de site Moodle ?*</span><span class="sxs-lookup"><span data-stu-id="14085-136">*Don't have a Moodle site already?*</span></span> <span data-ttu-id="14085-137">Vous voudrez peut-être consulter notre moodle sur lepo [Azure](https://github.com/azure/moodle) où vous pouvez rapidement déployer une instance Moodle sur Azure et la personnaliser selon vos besoins.</span><span class="sxs-lookup"><span data-stu-id="14085-137">You might want to check out our Moodle on Azure [repo](https://github.com/azure/moodle) where you can quickly deploy a Moodle instance on Azure and customize it to your needs.</span></span>

## <a name="step-2-configure-the-connection-between-the-microsoft-365-or-office-365-plugin-and-azure-active-directory"></a><span data-ttu-id="14085-138">Étape 2 : configurer la connexion entre le plug-in Microsoft 365 ou Office 365 et le Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="14085-138">Step 2: Configure the connection between the Microsoft 365 or Office 365 plugin and Azure Active Directory</span></span>

> [!VIDEO https://www.youtube.com/embed/FpGEezaJ3SA]

<span data-ttu-id="14085-139">Vous devez ensuite inscrire Moodle en tant qu’application dans votre Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="14085-139">Next you'll need to register Moodle as an application in your Azure Active Directory.</span></span> <span data-ttu-id="14085-140">Nous avons fourni un script PowerShell pour vous aider à effectuer ce processus.</span><span class="sxs-lookup"><span data-stu-id="14085-140">We've provided a PowerShell script to help you complete this process.</span></span> <span data-ttu-id="14085-141">Le script PowerShell permet de dispositions une nouvelle application Azure AD pour Microsoft 365 ou Office 365 votre organisation, qui sera utilisée par le plug-in Moodle.</span><span class="sxs-lookup"><span data-stu-id="14085-141">The PowerShell Script provisions a new Azure AD application for your Microsoft 365 or Office 365 organization, which will be used by the Moodle Plugin.</span></span> <span data-ttu-id="14085-142">Le script configurera l’application pour votre client Microsoft 365 ou Office 365, configurera toutes les URL de réponse requises et les autorisations pour l’application mise en service et retournera l’AppID et la clé.</span><span class="sxs-lookup"><span data-stu-id="14085-142">The script will provision the app for your Microsoft 365 or Office 365 tenant, set up all the required Reply URLs and Permissions for the provisioned app and return the AppID and Key.</span></span> <span data-ttu-id="14085-143">Vous pouvez utiliser l’AppID et la clé générées dans votre page de configuration du plug-in Moodle pour configurer votre serveur Moodle avec Azure AD.</span><span class="sxs-lookup"><span data-stu-id="14085-143">You can use the generated AppID and Key in your Moodle Plugin Setup Page to configure your Moodle server with Azure AD.</span></span> <span data-ttu-id="14085-144">Si vous souhaitez consulter les étapes manuelles détaillées automatisables par le script PowerShell, vous pouvez les trouver dans la documentation complète du [plug-in.](https://docs.moodle.org/34/en/Office365#Register_your_Moodle_instance_as_an_Application)</span><span class="sxs-lookup"><span data-stu-id="14085-144">If you want to see the detailed manual steps that the PowerShell script is automating, you can find them in the full [documentation for the plugin](https://docs.moodle.org/34/en/Office365#Register_your_Moodle_instance_as_an_Application).</span></span>

### <a name="moodle-tab-for-microsoft-teams-information-flow"></a><span data-ttu-id="14085-145">Moodle tab for Microsoft Teams information flow</span><span class="sxs-lookup"><span data-stu-id="14085-145">Moodle tab for Microsoft Teams information flow</span></span>

<img width="530px" src="media/MoodleTabInformationFlow.png" alt="Illustration of Moodle tab for Microsoft Teams information flow" title="Illustration de l’onglet Moodle pour Microsoft Teams d’informations" />

1. <span data-ttu-id="14085-147">Dans la page Microsoft 365 ou Office 365 du plug-in Integration, sélectionnez **l’onglet** Configuration.</span><span class="sxs-lookup"><span data-stu-id="14085-147">From the Microsoft 365 or Office 365 Integration plugin page, select the **Setup** tab.</span></span>
1. <span data-ttu-id="14085-148">Cliquez sur **le bouton Télécharger un script PowerShell** et enregistrez-le sur votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="14085-148">Click the **Download PowerShell Script** button and save it to your local computer.</span></span>
1. <span data-ttu-id="14085-149">Vous devez préparer le script PowerShell à partir du fichier ZIP.</span><span class="sxs-lookup"><span data-stu-id="14085-149">You'll need to prepare the PowerShell script from the ZIP file.</span></span> <span data-ttu-id="14085-150">Pour ce faire :</span><span class="sxs-lookup"><span data-stu-id="14085-150">To do so:</span></span>
    * <span data-ttu-id="14085-151">Téléchargez et extrayz le `Moodle-AzureAD-Powershell.zip` fichier.</span><span class="sxs-lookup"><span data-stu-id="14085-151">Download and extract the `Moodle-AzureAD-Powershell.zip` file.</span></span>
    * <span data-ttu-id="14085-152">Ouvrez le dossier extrait.</span><span class="sxs-lookup"><span data-stu-id="14085-152">Open the extracted folder.</span></span>
    * <span data-ttu-id="14085-153">Cliquez avec le bouton droit sur `Moodle-AzureAD-Script.ps1` le fichier, puis sélectionnez **Propriétés.**</span><span class="sxs-lookup"><span data-stu-id="14085-153">Right-click on the `Moodle-AzureAD-Script.ps1` file and select **Properties**.</span></span>
    * <span data-ttu-id="14085-154">Sous **l’onglet Général** de la fenêtre Propriétés, cochez la case en regard de `Unblock` l’attribut Sécurité en bas. </span><span class="sxs-lookup"><span data-stu-id="14085-154">Under the **General** tab of the Properties window, check the `Unblock` box next to the **Security** attribute at the bottom.</span></span>
    * <span data-ttu-id="14085-155">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="14085-155">Click **OK**.</span></span>
    * <span data-ttu-id="14085-156">Copiez le chemin d’accès du répertoire du dossier extrait.</span><span class="sxs-lookup"><span data-stu-id="14085-156">Copy the directory path of the extracted folder.</span></span>
1. <span data-ttu-id="14085-157">Ensuite, vous exécuterez PowerShell en tant qu’administrateur :</span><span class="sxs-lookup"><span data-stu-id="14085-157">Next you'll run PowerShell as an administrator:</span></span>
    * <span data-ttu-id="14085-158">Cliquez sur Démarrer.</span><span class="sxs-lookup"><span data-stu-id="14085-158">Click Start.</span></span>
    * <span data-ttu-id="14085-159">Tapez PowerShell.</span><span class="sxs-lookup"><span data-stu-id="14085-159">Type PowerShell.</span></span>
    * <span data-ttu-id="14085-160">Cliquez avec le bouton droit sur Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="14085-160">Right-click Windows PowerShell.</span></span>
    * <span data-ttu-id="14085-161">Cliquez sur « Exécuter en tant qu’administrateur ».</span><span class="sxs-lookup"><span data-stu-id="14085-161">Click "Run as Administrator".</span></span>
1. <span data-ttu-id="14085-162">Accédez au répertoire décompressé en tapant l’endroit où se trouve le `cd ...\...\Moodle-AzureAD-Powershell` `...\...` chemin d’accès à l’annuaire.</span><span class="sxs-lookup"><span data-stu-id="14085-162">Navigate to the unzipped directory by typing `cd ...\...\Moodle-AzureAD-Powershell` where `...\...` is the path to the directory.</span></span>
1. <span data-ttu-id="14085-163">Exécutez le script PowerShell par :</span><span class="sxs-lookup"><span data-stu-id="14085-163">Execute the PowerShell script by:</span></span>
    * <span data-ttu-id="14085-164">`Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser`Entrée.</span><span class="sxs-lookup"><span data-stu-id="14085-164">Enter `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser`.</span></span>
    * <span data-ttu-id="14085-165">`.\Moodle-AzureAD-Script.ps1`Entrée.</span><span class="sxs-lookup"><span data-stu-id="14085-165">Enter `.\Moodle-AzureAD-Script.ps1`.</span></span>
    * <span data-ttu-id="14085-166">Connectez-vous à Microsoft 365 compte Office 365 administrateur dans la fenêtre pop-up.</span><span class="sxs-lookup"><span data-stu-id="14085-166">Log in to your Microsoft 365 or Office 365 Administrator account in the pop-up window.</span></span>
    * <span data-ttu-id="14085-167">Entrez le nom de l’application Azure AD (par exemple.</span><span class="sxs-lookup"><span data-stu-id="14085-167">Enter the name of the Azure AD Application (Ex.</span></span> <span data-ttu-id="14085-168">Plug-in Moodle/Moodle).</span><span class="sxs-lookup"><span data-stu-id="14085-168">Moodle/Moodle plugin).</span></span>
    * <span data-ttu-id="14085-169">Entrez l’URL de votre serveur Moodle.</span><span class="sxs-lookup"><span data-stu-id="14085-169">Enter the URL of your Moodle server.</span></span>
    * <span data-ttu-id="14085-170">Copiez **l’ID d’application** et la **clé d’application** générés par le script et enregistrez-les.</span><span class="sxs-lookup"><span data-stu-id="14085-170">Copy the **Application ID** and **Application Key** generated by the script and save them.</span></span>
1. <span data-ttu-id="14085-171">Vous devrez ensuite ajouter l’ID et la clé au plug-in Moodle.</span><span class="sxs-lookup"><span data-stu-id="14085-171">Next you'll need to add the Id and Key to the Moodle Plugin.</span></span> <span data-ttu-id="14085-172">Revenir à la page d’administration du plug-in (l’administration du site > les plug-ins > Microsoft 365 l’intégration).</span><span class="sxs-lookup"><span data-stu-id="14085-172">Return to the plugin administration page (Site administration > Plugins > Microsoft 365 Integration).</span></span>
1. <span data-ttu-id="14085-173">Sous **l’onglet** Configuration, ajoutez **l’ID d’application** et la clé d’application que vous avez copiées précédemment, puis cliquez **sur Enregistrer les modifications.** </span><span class="sxs-lookup"><span data-stu-id="14085-173">On the **Setup** tab add the **Application Id** and **Application Key** you copied previously, then click **Save changes**.</span></span>
1. <span data-ttu-id="14085-174">Une fois la page actualisée, vous devriez à présent voir une nouvelle section **Choisir la méthode de connexion.**</span><span class="sxs-lookup"><span data-stu-id="14085-174">Once the page refreshes you should now see a new section **Choose connection method**.</span></span> <span data-ttu-id="14085-175">Cliquez sur la case à cocher par **défaut,** puis cliquez **à nouveau sur** Enregistrer les modifications.</span><span class="sxs-lookup"><span data-stu-id="14085-175">Click the checkbox labeled **Default** and then click **Save changes** again.</span></span>
1. <span data-ttu-id="14085-176">Une fois la page actualisée, vous verrez un autre consentement de l’administrateur de nouvelle section **& informations supplémentaires.**</span><span class="sxs-lookup"><span data-stu-id="14085-176">Once the page refreshes you will see another new section **Admin consent & additional information**.</span></span>
    * <span data-ttu-id="14085-177">Cliquez sur **le lien Accord** de l’administrateur, entrez Microsoft 365 ou  Office 365 d’administrateur général, puis acceptez pour accorder les autorisations.</span><span class="sxs-lookup"><span data-stu-id="14085-177">Click the **Provide Admin Consent** link, enter your Microsoft 365 or Office 365 Global Administrator credentials, then **Accept** to grant the permissions.</span></span>
    * <span data-ttu-id="14085-178">En regard du **champ Client Azure AD,** cliquez sur **le bouton** Détecter.</span><span class="sxs-lookup"><span data-stu-id="14085-178">Next to the **Azure AD Tenant** field click the **Detect** button.</span></span>
    * <span data-ttu-id="14085-179">À côté de **l OneDrive Entreprise URL,** cliquez sur **le bouton** Détecter.</span><span class="sxs-lookup"><span data-stu-id="14085-179">Next to the **OneDrive for Business URL** click the **Detect** button.</span></span>
    * <span data-ttu-id="14085-180">Une fois les champs remplis, cliquez à nouveau sur **le bouton** Enregistrer les modifications.</span><span class="sxs-lookup"><span data-stu-id="14085-180">Once the fields populate, click the **Save changes** button again.</span></span>
1. <span data-ttu-id="14085-181">Cliquez sur le **bouton Mettre** à jour pour vérifier l’installation, puis **enregistrez les modifications.**</span><span class="sxs-lookup"><span data-stu-id="14085-181">Click the **Update** button to verify the installation, then **Save changes**.</span></span>
1. <span data-ttu-id="14085-182">Vous devrez ensuite synchroniser les utilisateurs entre votre serveur Moodle et Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="14085-182">Next you'll need to synchronize users between your Moodle server and Azure Active Directory.</span></span> <span data-ttu-id="14085-183">En fonction de votre environnement, vous pouvez sélectionner différentes options au cours de cette étape.</span><span class="sxs-lookup"><span data-stu-id="14085-183">Depending on your environment, you may select different options during this stage.</span></span> <span data-ttu-id="14085-184">Notez que la configuration que vous définissez ici s’exécute avec chaque run Moodle cron (généralement une fois par jour) pour que tout reste synchronisé. Pour commencer :</span><span class="sxs-lookup"><span data-stu-id="14085-184">Note that the configuration you set here will run with each Moodle cron run (typically once a day) to keep everything in sync. To get started:</span></span>
    * <span data-ttu-id="14085-185">Basculer vers **l’onglet Paramètres synchronisation**</span><span class="sxs-lookup"><span data-stu-id="14085-185">Switch to the **Sync Settings tab**</span></span>
    * <span data-ttu-id="14085-186">Dans la section **Synchroniser les utilisateurs avec Azure AD,** cochez les case qui s’appliquent à votre environnement.</span><span class="sxs-lookup"><span data-stu-id="14085-186">In the **Sync users with Azure AD** section, select the checkboxes that apply to your environment.</span></span> <span data-ttu-id="14085-187">En règle générale, vous devez sélectionner au moins :</span><span class="sxs-lookup"><span data-stu-id="14085-187">Typically you would select at least:</span></span>
        * <span data-ttu-id="14085-188">Créer des comptes dans Moodle pour les utilisateurs dans Azure AD</span><span class="sxs-lookup"><span data-stu-id="14085-188">Create accounts in Moodle for users in Azure AD</span></span>
        * <span data-ttu-id="14085-189">Mettre à jour tous les comptes dans Moodle pour les utilisateurs dans Azure AD</span><span class="sxs-lookup"><span data-stu-id="14085-189">Update all accounts in Moodle for users in Azure AD</span></span>
    * <span data-ttu-id="14085-190">Dans la section Restriction de création d’utilisateurs, vous pouvez configurer un filtre pour limiter les utilisateurs Azure AD qui seront synchronisés avec Moodle. </span><span class="sxs-lookup"><span data-stu-id="14085-190">In the **User Creation Restriction** section you can set up a filter to limit the Azure AD users that will be synced to Moodle.</span></span>
    * <span data-ttu-id="14085-191">La section **Mappage des** champs utilisateur vous permet de personnaliser le mappage de champ Profil utilisateur Azure AD to Moodle.</span><span class="sxs-lookup"><span data-stu-id="14085-191">The **User Field Mapping** section will allow you to customize the Azure AD to Moodle User Profile field mapping.</span></span>
    * <span data-ttu-id="14085-192">Dans la section **Teams** Synchroniser, vous pouvez choisir de créer automatiquement des groupes (c’est-à-dire, des Teams) pour tout ou partie de vos cours Moodle existants.</span><span class="sxs-lookup"><span data-stu-id="14085-192">In the **Teams Sync** section you can choose to automatically create Groups (i.e. Teams) for some, or all, of your existing Moodle courses.</span></span>
1. <span data-ttu-id="14085-193">Pour valider les tâches de cron (et les exécuter manuellement si vous le souhaitez pour la première exécuter), cliquez sur le lien de **la page** de gestion des tâches prévues dans la section Synchroniser les utilisateurs avec **Azure AD.**</span><span class="sxs-lookup"><span data-stu-id="14085-193">To validate the cron jobs (and run them manually if you wish to for the first run) click the **Scheduled tasks management page** link in the **Sync users with Azure AD** section.</span></span> <span data-ttu-id="14085-194">Vous êtes alors sur la page **Tâches prévues.**</span><span class="sxs-lookup"><span data-stu-id="14085-194">This will take you to the **Scheduled Tasks** page.</span></span>
    * <span data-ttu-id="14085-195">Faites défiler vers le bas et recherchez le travail Synchroniser les utilisateurs avec le travail **Azure AD,** puis cliquez **sur Exécuter maintenant.**</span><span class="sxs-lookup"><span data-stu-id="14085-195">Scroll down and find the job **Sync users with Azure AD** job and click **Run now**.</span></span>
    * <span data-ttu-id="14085-196">Si vous choisissez de créer des groupes sur la base de cours existants, vous pouvez également exécuter les groupes d’utilisateurs dans Office 365 **travail.**</span><span class="sxs-lookup"><span data-stu-id="14085-196">If you chose to create Groups based on existing courses, you can also run the **Create user groups in Office 365** job.</span></span>
1. <span data-ttu-id="14085-197">Revenir à la page d’administration du plug-in (> l’administration du site > Microsoft 365 l’intégration), puis sélectionnez **Teams Paramètres** page.</span><span class="sxs-lookup"><span data-stu-id="14085-197">Return to the plugin administration page (Site administration > Plugins > Microsoft 365 Integration) and select the **Teams Settings** page.</span></span> <span data-ttu-id="14085-198">Vous devez configurer certains paramètres de sécurité pour activer l’Teams’application.</span><span class="sxs-lookup"><span data-stu-id="14085-198">You'll need to configure some security settings to enable the Teams app integration.</span></span>
    * <span data-ttu-id="14085-199">Pour activer l’Connecter OpenID,  cliquez sur le lien Gérer l’authentification, puis cliquez sur l’icône en forme d’œil sur la ligne **Connecter’OpenId si** elle est grisée.</span><span class="sxs-lookup"><span data-stu-id="14085-199">To enable OpenID Connect, click the **Manage Authentication** link, and click the eye icon on the **OpenId Connect** line if it is greyed out.</span></span>
    * <span data-ttu-id="14085-200">Vous devez ensuite activer l’incorporation d’images.</span><span class="sxs-lookup"><span data-stu-id="14085-200">Next you'll need to enable frame embedding.</span></span> <span data-ttu-id="14085-201">Cliquez sur **le lien de sécurité HTTP,** puis cochez la case en regard d’Autoriser **l’incorporation d’images.**</span><span class="sxs-lookup"><span data-stu-id="14085-201">Click the **HTTP Security** link, then click the checkbox next to **Allow frame embedding**.</span></span>
    * <span data-ttu-id="14085-202">L’étape suivante consiste à activer les services web qui activeront les fonctionnalités de l’API Moodle.</span><span class="sxs-lookup"><span data-stu-id="14085-202">The next step is to enable web services which will enable the Moodle API features.</span></span> <span data-ttu-id="14085-203">Cliquez sur **le lien Fonctionnalités** avancées, puis vérifiez que la case à cocher en regard d’Activer les **services web** est activée.</span><span class="sxs-lookup"><span data-stu-id="14085-203">Click the **Advanced Features** link, then make sure the checkbox next to **Enable web services** is checked.</span></span>
    * <span data-ttu-id="14085-204">Enfin, vous devez activer les services externes pour Microsoft 365 ou Office 365.</span><span class="sxs-lookup"><span data-stu-id="14085-204">Finally you'll need to enable the external services for Microsoft 365 or Office 365.</span></span> <span data-ttu-id="14085-205">Cliquez sur le **lien Services externes,** puis sur :</span><span class="sxs-lookup"><span data-stu-id="14085-205">Click the **External services** link then:</span></span>
        * <span data-ttu-id="14085-206">Cliquez **sur** Modifier dans la **ligne Moodle Office 365 Services WebServices.**</span><span class="sxs-lookup"><span data-stu-id="14085-206">Click **Edit** on the **Moodle Office 365 Webservices** row.</span></span>
        * <span data-ttu-id="14085-207">Activez la case à cocher **en regard de Activé,** puis cliquez **sur Enregistrer les modifications**</span><span class="sxs-lookup"><span data-stu-id="14085-207">Mark the checkbox next to **Enabled**, then click **Save Changes**</span></span>
    * <span data-ttu-id="14085-208">Vous devrez ensuite modifier vos autorisations d’utilisateur authentifiées pour leur permettre de créer des jetons de service web.</span><span class="sxs-lookup"><span data-stu-id="14085-208">Next you'll need to edit your authenticated user permissions to allow them to create web service tokens.</span></span> <span data-ttu-id="14085-209">Cliquez sur **le lien Du rôle d’édition « Utilisateur authentifié** ».</span><span class="sxs-lookup"><span data-stu-id="14085-209">Click the **Editing role 'Authenticated user'** link.</span></span> <span data-ttu-id="14085-210">Faites défiler vers le bas, **recherchez la fonctionnalité Créer un jeton de service web** et cochez **la case** Autoriser.</span><span class="sxs-lookup"><span data-stu-id="14085-210">Scroll down and find the **Create a web service token** capability and mark the **Allow** checkbox.</span></span>

## <a name="step-3-deploy-the-moodle-assistant-bot-to-azure"></a><span data-ttu-id="14085-211">Étape 3 : déployer le bot Assistant Moodle sur Azure</span><span class="sxs-lookup"><span data-stu-id="14085-211">Step 3: Deploy the Moodle Assistant Bot to Azure</span></span>

> [!VIDEO https://www.youtube.com/embed/gbkJxf8FlfY]

<span data-ttu-id="14085-212">Le bot Assistant Moodle gratuit pour Microsoft Teams aux enseignants et aux étudiants de répondre à des questions sur leurs cours, devoirs, notes et autres informations dans Moodle.</span><span class="sxs-lookup"><span data-stu-id="14085-212">The free Moodle Assistant Bot for Microsoft Teams helps teachers and students answer questions about their courses, assignments, grades and other information in Moodle.</span></span> <span data-ttu-id="14085-213">Le bot envoie également des notifications Moodle aux étudiants et aux enseignants directement dans Teams.</span><span class="sxs-lookup"><span data-stu-id="14085-213">The bot also sends Moodle notifications to students and teachers right within Teams.</span></span> <span data-ttu-id="14085-214">Ce bot est un projet open source mis à jour par Microsoft et [est disponible sur GitHub.](https://github.com/microsoft/Moodle-Teams-Bot)</span><span class="sxs-lookup"><span data-stu-id="14085-214">This bot is an open source project maintained by Microsoft, and is [available on GitHub](https://github.com/microsoft/Moodle-Teams-Bot).</span></span>

> [!NOTE]
> <span data-ttu-id="14085-215">Dans cette section, vous allez déployer les ressources dans votre abonnement Azure et toutes les ressources seront configurées au **niveau** gratuit.</span><span class="sxs-lookup"><span data-stu-id="14085-215">In this section you will deploy resources to your Azure subscription, and all resources will be configured using the **free** tier.</span></span> <span data-ttu-id="14085-216">Selon l’utilisation de votre robot, vous devrez peut-être mettre ces ressources à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="14085-216">Depending on the usage of your bot, you may need to scale these resources.</span></span>
> <span data-ttu-id="14085-217">Si vous voulez simplement utiliser l’onglet Moodle sans le bot, passez à [l’étape 4.](#step-4-deploy-your-microsoft-teams-app)</span><span class="sxs-lookup"><span data-stu-id="14085-217">If you want to just use the Moodle tab without the bot, skip to [step 4](#step-4-deploy-your-microsoft-teams-app).</span></span>

### <a name="moodle-bot-information-flow"></a><span data-ttu-id="14085-218">Flux d’informations sur le robot Moodle</span><span class="sxs-lookup"><span data-stu-id="14085-218">Moodle bot information flow</span></span>

<img width="530px" src="media/MoodleBotInformationFlow.png" alt="llustration of Moodle bot for Microsoft Teams information flow" title="Illustration du bot Moodle pour le flux Microsoft Teams’informations" />


<span data-ttu-id="14085-220">Pour installer le robot, vous devez d’abord l’enregistrer sur la plateforme [identité Microsoft.](https://identity.microsoft.com/Landing)</span><span class="sxs-lookup"><span data-stu-id="14085-220">To install the bot, you'll first need to register it on the [Microsoft Identity Platform](https://identity.microsoft.com/Landing).</span></span> <span data-ttu-id="14085-221">Cela permet à votre bot de s’authentifier avec vos points de terminaison Microsoft.</span><span class="sxs-lookup"><span data-stu-id="14085-221">This allows your Bot to authenticate against your Microsoft endpoints.</span></span> <span data-ttu-id="14085-222">Pour inscrire votre robot :</span><span class="sxs-lookup"><span data-stu-id="14085-222">To register your bot:</span></span>

1. <span data-ttu-id="14085-223">Revenir à la page d’administration du plug-in (> l’administration du site et > Microsoft 365 l’intégration), puis sélectionnez **l’Teams Paramètres** groupe.</span><span class="sxs-lookup"><span data-stu-id="14085-223">Return to the plugin administration page (Site administration > Plugins > Microsoft 365 Integration) and select the **Teams Settings** tab.</span></span>
1. <span data-ttu-id="14085-224">Cliquez sur le **lien portail d’inscription** des applications Microsoft et connectez-vous avec votre ID Microsoft.</span><span class="sxs-lookup"><span data-stu-id="14085-224">Click the **Microsoft Application Registration Portal** link and login with your Microsoft Id.</span></span>
1. <span data-ttu-id="14085-225">Entrez un nom pour votre application (Eg.</span><span class="sxs-lookup"><span data-stu-id="14085-225">Enter a name for your app (Eg.</span></span> <span data-ttu-id="14085-226">MoodleBot) et cliquez sur **le bouton** Créer.</span><span class="sxs-lookup"><span data-stu-id="14085-226">MoodleBot) and click the **Create** button.</span></span>
1. <span data-ttu-id="14085-227">Copiez **l’ID d’application** et collez-le dans le champ **ID d’application** bot de **Paramètres** page.</span><span class="sxs-lookup"><span data-stu-id="14085-227">Copy the **Application Id** and paste it into the **Bot Application ID** field on the **Team Settings** page.</span></span>
1. <span data-ttu-id="14085-228">Cliquez sur le **bouton Générer un nouveau mot de** passe.</span><span class="sxs-lookup"><span data-stu-id="14085-228">Click the **Generate New Password** button.</span></span> <span data-ttu-id="14085-229">Copiez le mot de passe généré et collez-le dans le champ Mot de passe **d’application** bot de **Paramètres** page.</span><span class="sxs-lookup"><span data-stu-id="14085-229">Copy the generated password and paste it into the **Bot Application Password** field on the **Team Settings** page.</span></span>
1. <span data-ttu-id="14085-230">Faites défiler vers le bas du formulaire et cliquez **sur Enregistrer les modifications.**</span><span class="sxs-lookup"><span data-stu-id="14085-230">Scroll to the bottom of the form and click **Save Changes**.</span></span>

<span data-ttu-id="14085-231">À présent que vous avez généré vos ID et mot de passe d’application, il est temps de déployer votre robot sur Azure.</span><span class="sxs-lookup"><span data-stu-id="14085-231">Now that you've generated your Application Id and Password, it's time to deploy your bot to Azure.</span></span> <span data-ttu-id="14085-232">Cliquez sur le bouton Déployer sur **Azure** et remplissez le formulaire avec les informations nécessaires (l’ID d’application bot, le mot de passe d’application bot et le « Moodle Secret » se trouve sur la page **Paramètres** d’équipe et les informations Azure se trouve sur la **page** Configuration).</span><span class="sxs-lookup"><span data-stu-id="14085-232">Click on the **Deploy to Azure** button and fill out the form with the necessary information (the Bot Application Id, Bot Application Password and the Moodle Secret are on the **Team Settings** page, and the Azure information is on the **Setup** page).</span></span> <span data-ttu-id="14085-233">Une fois le formulaire rempli, cliquez sur la case à cocher  pour accepter les conditions générales, puis cliquez sur le bouton Acheter (toutes les ressources Azure sont déployées au niveau gratuit).</span><span class="sxs-lookup"><span data-stu-id="14085-233">Once you've got the form filled out, click the check box to agree to the terms and conditions then click the **Purchase** button (all Azure resources are deployed to the free tier).</span></span>

<span data-ttu-id="14085-234">Une fois le déploiement des ressources terminé dans Azure, vous devez configurer le plug-in Moodle avec son point de terminaison de messagerie.</span><span class="sxs-lookup"><span data-stu-id="14085-234">Once the resources are finished deploying to Azure, you'll need to configure the Moodle plugin with its messaging endpoint.</span></span> <span data-ttu-id="14085-235">Tout d’abord, vous devez obtenir le point de terminaison auprès de votre bot dans Azure.</span><span class="sxs-lookup"><span data-stu-id="14085-235">First, you'll need to get the endpoint from your Bot in Azure.</span></span> <span data-ttu-id="14085-236">Pour ce faire :</span><span class="sxs-lookup"><span data-stu-id="14085-236">To do that:</span></span>

1. <span data-ttu-id="14085-237">Si ce n’est pas déjà fait, connectez-vous au [portail Azure.](https://portal.azure.com)</span><span class="sxs-lookup"><span data-stu-id="14085-237">If you aren't already, log into the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="14085-238">Dans le volet gauche, **sélectionnez Groupes de ressources.**</span><span class="sxs-lookup"><span data-stu-id="14085-238">In the left pane select **Resource groups**.</span></span>
3. <span data-ttu-id="14085-239">Dans la liste, sélectionnez le groupe de ressources que vous avez utilisé (ou créé) lors du déploiement de votre bot.</span><span class="sxs-lookup"><span data-stu-id="14085-239">From the list select the resource group you just used (or created) while deploying your Bot.</span></span>
4. <span data-ttu-id="14085-240">Sélectionnez la **ressource WebApp Bot** dans la liste des ressources du groupe.</span><span class="sxs-lookup"><span data-stu-id="14085-240">Select the **WebApp Bot** resource from the list of resources in the group.</span></span>
5. <span data-ttu-id="14085-241">Copiez le **point de terminaison de la messagerie** à partir de la section Vue **d’ensemble.**</span><span class="sxs-lookup"><span data-stu-id="14085-241">Copy the **Messaging Endpoint** from the **Overview** section.</span></span>
6. <span data-ttu-id="14085-242">In Moodle, open the **Team Paramètres** page of your Moodle Plugin.</span><span class="sxs-lookup"><span data-stu-id="14085-242">In Moodle, open the **Team Settings** page of your Moodle Plugin.</span></span>
7. <span data-ttu-id="14085-243">Dans le **champ Point de terminaison du robot,** collez l’URL que vous viennent de copier et modifiez les *messages* en *web.*</span><span class="sxs-lookup"><span data-stu-id="14085-243">In the **Bot Endpoint** field paste the URL you just copied and change the word *messages* to *webhook*.</span></span> <span data-ttu-id="14085-244">L’URL doit maintenant ressembler à `https://botname.azurewebsites.net/api/webhook`</span><span class="sxs-lookup"><span data-stu-id="14085-244">The URL should now look like `https://botname.azurewebsites.net/api/webhook`</span></span>
8. <span data-ttu-id="14085-245">Cliquez sur **Enregistrer les modifications**</span><span class="sxs-lookup"><span data-stu-id="14085-245">Click **Save Changes**</span></span>
9. <span data-ttu-id="14085-246">Une fois vos modifications enregistrées, revenir à l’onglet **Paramètres** de l’équipe, cliquer sur le bouton Télécharger le fichier manifeste et enregistrer le package manifeste sur votre ordinateur (vous l’utiliserez dans la section suivante). </span><span class="sxs-lookup"><span data-stu-id="14085-246">Once your changes have saved, go back to the **Team Settings** tab, click the **Download manifest file** button and save the manifest package to your computer (you'll use it in the next section).</span></span>

## <a name="step-4-deploy-your-microsoft-teams-app"></a><span data-ttu-id="14085-247">Étape 4 : déployer votre application Microsoft Teams messagerie</span><span class="sxs-lookup"><span data-stu-id="14085-247">Step 4: Deploy your Microsoft Teams app</span></span>

> [!VIDEO https://www.youtube.com/embed/2rMb7gtM_ZM]

<span data-ttu-id="14085-248">À présent que votre bot est déployé dans Azure et configuré pour parler à votre serveur Moodle, il est temps de déployer votre application Microsoft Teams données.</span><span class="sxs-lookup"><span data-stu-id="14085-248">Now that you have your Bot deployed to Azure and configured to talk to your Moodle server, it's time to deploy your Microsoft Teams app.</span></span> <span data-ttu-id="14085-249">Pour ce faire, vous devez charger le fichier manifeste que vous avez téléchargé à partir de la page de l’équipe du plug-Paramètres Moodle à l’étape précédente.</span><span class="sxs-lookup"><span data-stu-id="14085-249">To do this you'll load the manifest file you downloaded from the Moodle Plugin Team Settings page in the previous step.</span></span>

<span data-ttu-id="14085-250">Avant d’installer l’application, vous devez vous assurer que les applications externes et le chargement d’applications sont activés.</span><span class="sxs-lookup"><span data-stu-id="14085-250">Before you can install the app you'll need to make sure external apps and sideloading of apps is enabled.</span></span> <span data-ttu-id="14085-251">Pour ce faire, vous pouvez suivre [ces étapes.](./admin-settings.md)</span><span class="sxs-lookup"><span data-stu-id="14085-251">To do so you can follow [these steps](./admin-settings.md).</span></span> <span data-ttu-id="14085-252">Une fois que vous avez garanti que les applications externes sont activées, vous pouvez suivre les étapes ci-dessous pour déployer votre application.</span><span class="sxs-lookup"><span data-stu-id="14085-252">Once you've ensured that external apps are enabled, you can follow the steps below to deploy your app.</span></span>

1. <span data-ttu-id="14085-253">Ouvrez Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="14085-253">Open Microsoft Teams.</span></span>
2. <span data-ttu-id="14085-254">Cliquez sur **l’icône** Store dans le bas gauche de la barre de navigation.</span><span class="sxs-lookup"><span data-stu-id="14085-254">Click the **Store** icon on the lower left of the navigation bar.</span></span>
3. <span data-ttu-id="14085-255">Cliquez sur le **Télécharger un lien d’application personnalisée** dans la liste des options.</span><span class="sxs-lookup"><span data-stu-id="14085-255">Click the **Upload a custom app** link from the list of options.</span></span> <span data-ttu-id="14085-256">*Remarque :* Si vous êtes connecté en tant qu’administration globale, vous aurez la possibilité de télécharger l’application dans le magasin d’applications de votre organisation, sinon vous ne pourrez charger l’application que pour Teams vous faites partie du « chargement sideloading »).</span><span class="sxs-lookup"><span data-stu-id="14085-256">*Note:* If you're logged in as a global administer you'll have the option of uploading the app to your organization's app store, otherwise you'll only be able to load the app for Teams you're a part of ("sideloading").</span></span>
4. <span data-ttu-id="14085-257">Sélectionnez `manifest.zip` le package que vous avez précédemment téléchargé, puis cliquez sur **Enregistrer.**</span><span class="sxs-lookup"><span data-stu-id="14085-257">Select the `manifest.zip` package you downloaded previously and click **Save**.</span></span> <span data-ttu-id="14085-258">Si vous n’avez pas encore téléchargé le package  manifeste, vous pouvez le faire à partir de l’onglet Paramètres de la page de configuration du plug-in dans Moodle.</span><span class="sxs-lookup"><span data-stu-id="14085-258">If you haven't yet downloaded the manifest package, you can do so from the **Team Settings** tab of the plugin configuration page in Moodle.</span></span>

<span data-ttu-id="14085-259">À présent que l’application est installée, vous pouvez ajouter l’onglet à n’importe quel canal que vous avez accès.</span><span class="sxs-lookup"><span data-stu-id="14085-259">Now that you have the app installed you can add the tab to any channel that you have access to.</span></span> <span data-ttu-id="14085-260">Pour ce faire, accédez au canal, cliquez sur le **+** symbole et sélectionnez votre application dans la liste.</span><span class="sxs-lookup"><span data-stu-id="14085-260">To do so navigate to the channel, click the **+** symbol and select your app from the list.</span></span> <span data-ttu-id="14085-261">Suivez les invites pour finaliser l’ajout de votre onglet de cours Moodle à un canal.</span><span class="sxs-lookup"><span data-stu-id="14085-261">Follow the prompts to finish adding your Moodle course tab to a channel.</span></span>

<span data-ttu-id="14085-262">Voilà!</span><span class="sxs-lookup"><span data-stu-id="14085-262">That's it!</span></span> <span data-ttu-id="14085-263">Vous et votre équipe pouvez maintenant commencer à utiliser vos cours Moodle directement à partir de Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="14085-263">You and your team, can now start working with your Moodle courses directly from Microsoft Teams.</span></span>

<span data-ttu-id="14085-264">Pour partager des demandes de fonctionnalités ou des commentaires avec nous, visitez notre [page User Voice.](https://microsoftteams.uservoice.com/forums/916759-moodle)</span><span class="sxs-lookup"><span data-stu-id="14085-264">To share any feature requests or feedback with us, please visit our [User Voice page](https://microsoftteams.uservoice.com/forums/916759-moodle).</span></span>

[!INCLUDE [uservoice-disclaimer-note](includes/uservoice-disclaimer-note.md)]